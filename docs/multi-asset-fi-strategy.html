<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Multi Asset FI Strategy | EPFR Strategy Notebooks</title>
  <meta name="description" content="The objective of this book is to present EPFRs proof of concept strategies so that readers have a profound understanding of how to use our EPFR’s flow and allocation dataset, construct a signal, and find initial value." />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="Multi Asset FI Strategy | EPFR Strategy Notebooks" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://epfr.github.io/EPFR-QuantNotebooks/images/EPFR_Icon.png" />
  <meta property="og:description" content="The objective of this book is to present EPFRs proof of concept strategies so that readers have a profound understanding of how to use our EPFR’s flow and allocation dataset, construct a signal, and find initial value." />
  <meta name="github-repo" content="EPFR/EPFR-QuantNotebooks" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Multi Asset FI Strategy | EPFR Strategy Notebooks" />
  
  <meta name="twitter:description" content="The objective of this book is to present EPFRs proof of concept strategies so that readers have a profound understanding of how to use our EPFR’s flow and allocation dataset, construct a signal, and find initial value." />
  <meta name="twitter:image" content="https://epfr.github.io/EPFR-QuantNotebooks/images/EPFR_Icon.png" />




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="api-multi-asset-region-strategy.html"/>
<link rel="next" href="api-dictionaries.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { font-weight: bold; } /* Alert */
code span.an { font-style: italic; } /* Annotation */
code span.cf { font-weight: bold; } /* ControlFlow */
code span.co { font-style: italic; } /* Comment */
code span.cv { font-style: italic; } /* CommentVar */
code span.do { font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.er { font-weight: bold; } /* Error */
code span.in { font-style: italic; } /* Information */
code span.kw { font-weight: bold; } /* Keyword */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.wa { font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/comingsoon.png"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="macro-strategy-signals.html"><a href="macro-strategy-signals.html"><i class="fa fa-check"></i>Macro Strategy Signals</a>
<ul>
<li class="chapter" data-level="" data-path="macro-strategy-signals.html"><a href="macro-strategy-signals.html#flow-momentum"><i class="fa fa-check"></i>Flow Momentum</a></li>
<li class="chapter" data-level="" data-path="macro-strategy-signals.html"><a href="macro-strategy-signals.html#activepassive-indicator"><i class="fa fa-check"></i>Active/Passive Indicator</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="epfr-stock-factors.html"><a href="epfr-stock-factors.html"><i class="fa fa-check"></i>EPFR Stock Factors</a>
<ul>
<li class="chapter" data-level="" data-path="epfr-stock-factors.html"><a href="epfr-stock-factors.html#daily-factors"><i class="fa fa-check"></i>Daily Factors:</a></li>
<li class="chapter" data-level="" data-path="epfr-stock-factors.html"><a href="epfr-stock-factors.html#monthly-factors"><i class="fa fa-check"></i>Monthly Factors:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="epfr-api.html"><a href="epfr-api.html"><i class="fa fa-check"></i>EPFR API</a>
<ul>
<li class="chapter" data-level="" data-path="quick-start.html"><a href="quick-start.html"><i class="fa fa-check"></i>Quick Start</a>
<ul>
<li class="chapter" data-level="" data-path="quick-start.html"><a href="quick-start.html#api-install"><i class="fa fa-check"></i>API Install</a></li>
<li class="chapter" data-level="" data-path="quick-start.html"><a href="quick-start.html#api-login"><i class="fa fa-check"></i>API Login</a></li>
<li class="chapter" data-level="" data-path="quick-start.html"><a href="quick-start.html#api-call"><i class="fa fa-check"></i>API Call</a></li>
<li class="chapter" data-level="" data-path="quick-start.html"><a href="quick-start.html#example-api-call"><i class="fa fa-check"></i>Example API call</a></li>
<li class="chapter" data-level="" data-path="quick-start.html"><a href="quick-start.html#api-date-format"><i class="fa fa-check"></i>API Date Format</a></li>
<li class="chapter" data-level="" data-path="quick-start.html"><a href="quick-start.html#supplemental-libraries"><i class="fa fa-check"></i>Supplemental Libraries</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="flow-percentage.html"><a href="flow-percentage.html"><i class="fa fa-check"></i>Flow-Percentage</a>
<ul>
<li class="chapter" data-level="" data-path="flow-percentage.html"><a href="flow-percentage.html#api-flow-percentage-country-strategy"><i class="fa fa-check"></i>API Flow-Percentage Country Strategy</a></li>
<li class="chapter" data-level="" data-path="flow-percentage.html"><a href="flow-percentage.html#api-country-allocations"><i class="fa fa-check"></i>API Country Allocations</a></li>
<li class="chapter" data-level="" data-path="flow-percentage.html"><a href="flow-percentage.html#api-fund-flows"><i class="fa fa-check"></i>API Fund Flows</a></li>
<li class="chapter" data-level="" data-path="flow-percentage.html"><a href="flow-percentage.html#calculating-flow-percentage-country"><i class="fa fa-check"></i>Calculating Flow-Percentage Country</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="api-multi-asset-region-strategy.html"><a href="api-multi-asset-region-strategy.html"><i class="fa fa-check"></i>API Multi Asset Region Strategy</a></li>
<li class="chapter" data-level="" data-path="multi-asset-fi-strategy.html"><a href="multi-asset-fi-strategy.html"><i class="fa fa-check"></i>Multi Asset FI Strategy</a></li>
<li class="chapter" data-level="" data-path="api-dictionaries.html"><a href="api-dictionaries.html"><i class="fa fa-check"></i>API Dictionaries</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="epfr.r-library.html"><a href="epfr.r-library.html"><i class="fa fa-check"></i>EPFR.r Library</a>
<ul>
<li class="chapter" data-level="" data-path="set-up.html"><a href="set-up.html"><i class="fa fa-check"></i>Set-up</a></li>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html"><i class="fa fa-check"></i>Strategy Functions</a>
<ul>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html#total-return-index"><i class="fa fa-check"></i>Total Return Index</a></li>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html#compunding-flows"><i class="fa fa-check"></i>Compunding Flows</a></li>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html#model"><i class="fa fa-check"></i>Model</a></li>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html#example"><i class="fa fa-check"></i>Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="epfr-data-filters.html"><a href="epfr-data-filters.html"><i class="fa fa-check"></i>EPFR Data &amp; Filters</a>
<ul>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html"><i class="fa fa-check"></i>Video Explanations</a>
<ul>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#asset-class-focus"><i class="fa fa-check"></i>Asset class focus</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#fund-type"><i class="fa fa-check"></i>Fund type</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#investor-type"><i class="fa fa-check"></i>Investor type</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#currency-of-flows"><i class="fa fa-check"></i>Currency of flows</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#fund-domicile-or-geographic-focus"><i class="fa fa-check"></i>Fund domicile or Geographic focus</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#theme"><i class="fa fa-check"></i>Theme</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#sector"><i class="fa fa-check"></i>Sector</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#style"><i class="fa fa-check"></i>Style</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#duration"><i class="fa fa-check"></i>Duration</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#individual-managers"><i class="fa fa-check"></i>Individual managers</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Macro Strategies</b></span></li>
<li class="chapter" data-level="1" data-path="multi-asset-strategy.html"><a href="multi-asset-strategy.html"><i class="fa fa-check"></i><b>1</b> Multi-Asset Strategy</a>
<ul>
<li class="chapter" data-level="1.1" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>1.1</b> Data</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="data.html"><a href="data.html#aggregations"><i class="fa fa-check"></i><b>1.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="1.1.2" data-path="data.html"><a href="data.html#daily-percentage-flow"><i class="fa fa-check"></i><b>1.1.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="1.1.3" data-path="data.html"><a href="data.html#aggregate-flow-file"><i class="fa fa-check"></i><b>1.1.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="1.1.4" data-path="data.html"><a href="data.html#return-file"><i class="fa fa-check"></i><b>1.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="strategy-implementation.html"><a href="strategy-implementation.html"><i class="fa fa-check"></i><b>1.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="strategy-implementation.html"><a href="strategy-implementation.html#compounding-flows"><i class="fa fa-check"></i><b>1.2.1</b> Compounding Flows</a></li>
<li class="chapter" data-level="1.2.2" data-path="strategy-implementation.html"><a href="strategy-implementation.html#total-return-index-1"><i class="fa fa-check"></i><b>1.2.2</b> Total Return Index</a></li>
<li class="chapter" data-level="1.2.3" data-path="strategy-implementation.html"><a href="strategy-implementation.html#subset-files"><i class="fa fa-check"></i><b>1.2.3</b> Subset files</a></li>
<li class="chapter" data-level="1.2.4" data-path="strategy-implementation.html"><a href="strategy-implementation.html#ranking-asset-classes"><i class="fa fa-check"></i><b>1.2.4</b> Ranking Asset Classes</a></li>
<li class="chapter" data-level="1.2.5" data-path="strategy-implementation.html"><a href="strategy-implementation.html#model-1"><i class="fa fa-check"></i><b>1.2.5</b> Model</a></li>
<li class="chapter" data-level="1.2.6" data-path="strategy-implementation.html"><a href="strategy-implementation.html#performance"><i class="fa fa-check"></i><b>1.2.6</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="fx-strategy.html"><a href="fx-strategy.html"><i class="fa fa-check"></i><b>2</b> FX Strategy</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-1.html"><a href="data-1.html"><i class="fa fa-check"></i><b>2.1</b> Data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-1.html"><a href="data-1.html#aggregations-1"><i class="fa fa-check"></i><b>2.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-1.html"><a href="data-1.html#daily-percentage-flow-1"><i class="fa fa-check"></i><b>2.1.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-1.html"><a href="data-1.html#aggregate-flow-file-1"><i class="fa fa-check"></i><b>2.1.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="2.1.4" data-path="data-1.html"><a href="data-1.html#return-file-1"><i class="fa fa-check"></i><b>2.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="strategy-implementation-1.html"><a href="strategy-implementation-1.html"><i class="fa fa-check"></i><b>2.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="strategy-implementation-1.html"><a href="strategy-implementation-1.html#compounding-flows-1"><i class="fa fa-check"></i><b>2.2.1</b> Compounding Flows</a></li>
<li class="chapter" data-level="2.2.2" data-path="strategy-implementation-1.html"><a href="strategy-implementation-1.html#ranking-currencies"><i class="fa fa-check"></i><b>2.2.2</b> Ranking Currencies</a></li>
<li class="chapter" data-level="2.2.3" data-path="strategy-implementation-1.html"><a href="strategy-implementation-1.html#model-2"><i class="fa fa-check"></i><b>2.2.3</b> Model</a></li>
<li class="chapter" data-level="2.2.4" data-path="strategy-implementation-1.html"><a href="strategy-implementation-1.html#performance-1"><i class="fa fa-check"></i><b>2.2.4</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="flow-percentage-country-strategy.html"><a href="flow-percentage-country-strategy.html"><i class="fa fa-check"></i><b>3</b> Flow-Percentage Country Strategy</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-2.html"><a href="data-2.html"><i class="fa fa-check"></i><b>3.1</b> Data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-2.html"><a href="data-2.html#aggregations-2"><i class="fa fa-check"></i><b>3.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-2.html"><a href="data-2.html#daily-percentage-flow-2"><i class="fa fa-check"></i><b>3.1.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-2.html"><a href="data-2.html#aggregate-flow-file-2"><i class="fa fa-check"></i><b>3.1.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="3.1.4" data-path="data-2.html"><a href="data-2.html#return-file-2"><i class="fa fa-check"></i><b>3.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html"><i class="fa fa-check"></i><b>3.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#compounding-flows-2"><i class="fa fa-check"></i><b>3.2.1</b> Compounding Flows</a></li>
<li class="chapter" data-level="3.2.2" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#total-return-index-2"><i class="fa fa-check"></i><b>3.2.2</b> Total Return Index</a></li>
<li class="chapter" data-level="3.2.3" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#ranking-countries"><i class="fa fa-check"></i><b>3.2.3</b> Ranking Countries</a></li>
<li class="chapter" data-level="3.2.4" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#model-3"><i class="fa fa-check"></i><b>3.2.4</b> Model</a></li>
<li class="chapter" data-level="3.2.5" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#performance-2"><i class="fa fa-check"></i><b>3.2.5</b> Performance</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="publications.html"><a href="publications.html"><i class="fa fa-check"></i><b>3.3</b> Publications</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="flow-percentage-sector-strategy.html"><a href="flow-percentage-sector-strategy.html"><i class="fa fa-check"></i><b>4</b> Flow-Percentage Sector Strategy</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-3.html"><a href="data-3.html"><i class="fa fa-check"></i><b>4.1</b> Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-3.html"><a href="data-3.html#aggregations-3"><i class="fa fa-check"></i><b>4.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-3.html"><a href="data-3.html#daily-percentage-flow-3"><i class="fa fa-check"></i><b>4.1.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="4.1.3" data-path="data-3.html"><a href="data-3.html#aggregate-flow-file-3"><i class="fa fa-check"></i><b>4.1.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="4.1.4" data-path="data-3.html"><a href="data-3.html#return-file-3"><i class="fa fa-check"></i><b>4.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html"><i class="fa fa-check"></i><b>4.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#compounding-flows-3"><i class="fa fa-check"></i><b>4.2.1</b> Compounding Flows</a></li>
<li class="chapter" data-level="4.2.2" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#total-return-index-3"><i class="fa fa-check"></i><b>4.2.2</b> Total Return Index</a></li>
<li class="chapter" data-level="4.2.3" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#ranking-sectors"><i class="fa fa-check"></i><b>4.2.3</b> Ranking Sectors</a></li>
<li class="chapter" data-level="4.2.4" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#model-4"><i class="fa fa-check"></i><b>4.2.4</b> Model</a></li>
<li class="chapter" data-level="4.2.5" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#performance-3"><i class="fa fa-check"></i><b>4.2.5</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="activepassive-country-strategy.html"><a href="activepassive-country-strategy.html"><i class="fa fa-check"></i><b>5</b> Active/Passive Country Strategy</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-4.html"><a href="data-4.html"><i class="fa fa-check"></i><b>5.1</b> Data</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="data-4.html"><a href="data-4.html#aggregations-4"><i class="fa fa-check"></i><b>5.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="5.1.2" data-path="data-4.html"><a href="data-4.html#activepassive-indicator-1"><i class="fa fa-check"></i><b>5.1.2</b> Active/Passive Indicator</a></li>
<li class="chapter" data-level="5.1.3" data-path="data-4.html"><a href="data-4.html#aggregate-indicator-file"><i class="fa fa-check"></i><b>5.1.3</b> Aggregate Indicator File</a></li>
<li class="chapter" data-level="5.1.4" data-path="data-4.html"><a href="data-4.html#return-file-4"><i class="fa fa-check"></i><b>5.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html"><i class="fa fa-check"></i><b>5.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#moving-sum-of-indicator"><i class="fa fa-check"></i><b>5.2.1</b> Moving Sum of Indicator</a></li>
<li class="chapter" data-level="5.2.2" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#total-return-index-4"><i class="fa fa-check"></i><b>5.2.2</b> Total Return Index</a></li>
<li class="chapter" data-level="5.2.3" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#ranking-countries-1"><i class="fa fa-check"></i><b>5.2.3</b> Ranking Countries</a></li>
<li class="chapter" data-level="5.2.4" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#model-5"><i class="fa fa-check"></i><b>5.2.4</b> Model</a></li>
<li class="chapter" data-level="5.2.5" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#performance-4"><i class="fa fa-check"></i><b>5.2.5</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="activepassive-sector-strategy.html"><a href="activepassive-sector-strategy.html"><i class="fa fa-check"></i><b>6</b> Active/Passive Sector Strategy</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-5.html"><a href="data-5.html"><i class="fa fa-check"></i><b>6.1</b> Data</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="data-5.html"><a href="data-5.html#aggregations-5"><i class="fa fa-check"></i><b>6.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="6.1.2" data-path="data-5.html"><a href="data-5.html#activepassive-indicator-2"><i class="fa fa-check"></i><b>6.1.2</b> Active/Passive Indicator</a></li>
<li class="chapter" data-level="6.1.3" data-path="data-5.html"><a href="data-5.html#aggregate-indicator-file-1"><i class="fa fa-check"></i><b>6.1.3</b> Aggregate Indicator File</a></li>
<li class="chapter" data-level="6.1.4" data-path="data-5.html"><a href="data-5.html#return-file-5"><i class="fa fa-check"></i><b>6.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html"><i class="fa fa-check"></i><b>6.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#moving-sum-of-indicator-1"><i class="fa fa-check"></i><b>6.2.1</b> Moving Sum of Indicator</a></li>
<li class="chapter" data-level="6.2.2" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#total-return-index-5"><i class="fa fa-check"></i><b>6.2.2</b> Total Return Index</a></li>
<li class="chapter" data-level="6.2.3" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#ranking-sectors-1"><i class="fa fa-check"></i><b>6.2.3</b> Ranking Sectors</a></li>
<li class="chapter" data-level="6.2.4" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#model-6"><i class="fa fa-check"></i><b>6.2.4</b> Model</a></li>
<li class="chapter" data-level="6.2.5" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#performance-5"><i class="fa fa-check"></i><b>6.2.5</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="flow-percentage-dm-rates-strategy.html"><a href="flow-percentage-dm-rates-strategy.html"><i class="fa fa-check"></i><b>7</b> Flow-Percentage DM Rates Strategy</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-6.html"><a href="data-6.html"><i class="fa fa-check"></i><b>7.1</b> Data</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="data-6.html"><a href="data-6.html#aggregations-6"><i class="fa fa-check"></i><b>7.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="7.1.2" data-path="data-6.html"><a href="data-6.html#daily-percentage-flow-4"><i class="fa fa-check"></i><b>7.1.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="7.1.3" data-path="data-6.html"><a href="data-6.html#aggregate-flow-file-4"><i class="fa fa-check"></i><b>7.1.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="7.1.4" data-path="data-6.html"><a href="data-6.html#return-file-6"><i class="fa fa-check"></i><b>7.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html"><i class="fa fa-check"></i><b>7.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html#compounding-flows-4"><i class="fa fa-check"></i><b>7.2.1</b> Compounding Flows</a></li>
<li class="chapter" data-level="7.2.2" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html#ranking-countries-2"><i class="fa fa-check"></i><b>7.2.2</b> Ranking Countries</a></li>
<li class="chapter" data-level="7.2.3" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html#model-7"><i class="fa fa-check"></i><b>7.2.3</b> Model</a></li>
<li class="chapter" data-level="7.2.4" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html#performance-6"><i class="fa fa-check"></i><b>7.2.4</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Alternative Macro Strategies</b></span></li>
<li class="chapter" data-level="8" data-path="flow-percentage-daily-fixed-income-strategy.html"><a href="flow-percentage-daily-fixed-income-strategy.html"><i class="fa fa-check"></i><b>8</b> Flow-Percentage Daily Fixed-Income Strategy</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-7.html"><a href="data-7.html"><i class="fa fa-check"></i><b>8.1</b> Data</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="data-7.html"><a href="data-7.html#aggregations-7"><i class="fa fa-check"></i><b>8.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="8.1.2" data-path="data-7.html"><a href="data-7.html#daily-percentage-flow-5"><i class="fa fa-check"></i><b>8.1.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="8.1.3" data-path="data-7.html"><a href="data-7.html#aggregate-flow-file-5"><i class="fa fa-check"></i><b>8.1.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="8.1.4" data-path="data-7.html"><a href="data-7.html#return-file-7"><i class="fa fa-check"></i><b>8.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="strategy-implementation-7.html"><a href="strategy-implementation-7.html"><i class="fa fa-check"></i><b>8.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="strategy-implementation-7.html"><a href="strategy-implementation-7.html#total-return-index-6"><i class="fa fa-check"></i><b>8.2.1</b> Total Return Index</a></li>
<li class="chapter" data-level="8.2.2" data-path="strategy-implementation-7.html"><a href="strategy-implementation-7.html#ranking-asset-classes-1"><i class="fa fa-check"></i><b>8.2.2</b> Ranking Asset Classes</a></li>
<li class="chapter" data-level="8.2.3" data-path="strategy-implementation-7.html"><a href="strategy-implementation-7.html#model-8"><i class="fa fa-check"></i><b>8.2.3</b> Model</a></li>
<li class="chapter" data-level="8.2.4" data-path="strategy-implementation-7.html"><a href="strategy-implementation-7.html#performance-7"><i class="fa fa-check"></i><b>8.2.4</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Stock Factors</b></span></li>
<li class="chapter" data-level="9" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>9</b> Overview</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#data-location"><i class="fa fa-check"></i>Data Location</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#data-derivation"><i class="fa fa-check"></i>Data Derivation</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="flow-momentum-1.html"><a href="flow-momentum-1.html"><i class="fa fa-check"></i><b>10</b> Flow Momentum</a>
<ul>
<li class="chapter" data-level="" data-path="flow-momentum-1.html"><a href="flow-momentum-1.html#flomo"><i class="fa fa-check"></i>FloMo</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="smart-money.html"><a href="smart-money.html"><i class="fa fa-check"></i><b>11</b> Smart Money</a>
<ul>
<li class="chapter" data-level="" data-path="smart-money.html"><a href="smart-money.html#references"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="smart-money.html"><a href="smart-money.html#flotrend"><i class="fa fa-check"></i>FloTrend</a></li>
<li class="chapter" data-level="" data-path="smart-money.html"><a href="smart-money.html#flodiff"><i class="fa fa-check"></i>FloDiff</a></li>
<li class="chapter" data-level="" data-path="smart-money.html"><a href="smart-money.html#flodiff2"><i class="fa fa-check"></i>FloDiff2</a></li>
<li class="chapter" data-level="" data-path="smart-money.html"><a href="smart-money.html#actwttrend"><i class="fa fa-check"></i>ActWtTrend</a></li>
<li class="chapter" data-level="" data-path="smart-money.html"><a href="smart-money.html#actwtdiff"><i class="fa fa-check"></i>ActWtDiff</a></li>
<li class="chapter" data-level="" data-path="smart-money.html"><a href="smart-money.html#actwtdiff2"><i class="fa fa-check"></i>ActWtDiff2</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="manager-momentum.html"><a href="manager-momentum.html"><i class="fa fa-check"></i><b>12</b> Manager momentum</a>
<ul>
<li class="chapter" data-level="" data-path="manager-momentum.html"><a href="manager-momentum.html#allocmo"><i class="fa fa-check"></i>AllocMo</a></li>
<li class="chapter" data-level="" data-path="manager-momentum.html"><a href="manager-momentum.html#alloctrend"><i class="fa fa-check"></i>AllocTrend</a></li>
<li class="chapter" data-level="" data-path="manager-momentum.html"><a href="manager-momentum.html#allocdiff"><i class="fa fa-check"></i>AllocDiff</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="ownership-dispersion.html"><a href="ownership-dispersion.html"><i class="fa fa-check"></i><b>13</b> Ownership Dispersion</a>
<ul>
<li class="chapter" data-level="" data-path="ownership-dispersion.html"><a href="ownership-dispersion.html#herfindahl"><i class="fa fa-check"></i>Herfindahl</a></li>
<li class="chapter" data-level="" data-path="ownership-dispersion.html"><a href="ownership-dispersion.html#fund-count"><i class="fa fa-check"></i>Fund Count</a></li>
<li class="chapter" data-level="" data-path="ownership-dispersion.html"><a href="ownership-dispersion.html#references-1"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="conviction.html"><a href="conviction.html"><i class="fa fa-check"></i><b>14</b> Conviction</a>
<ul>
<li class="chapter" data-level="" data-path="conviction.html"><a href="conviction.html#allocskew"><i class="fa fa-check"></i>AllocSkew</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="index-curse-share-suprise.html"><a href="index-curse-share-suprise.html"><i class="fa fa-check"></i><b>15</b> Index Curse (Share Suprise)</a>
<ul>
<li class="chapter" data-level="" data-path="index-curse-share-suprise.html"><a href="index-curse-share-suprise.html#shssurp"><i class="fa fa-check"></i>ShsSurp</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="backtest-example.html"><a href="backtest-example.html"><i class="fa fa-check"></i><b>16</b> Backtest Example</a>
<ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i>Functions</a>
<ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#file-name"><i class="fa fa-check"></i>File name</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#format-file"><i class="fa fa-check"></i>Format file</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#fetchs-file"><i class="fa fa-check"></i>Fetchs file</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="import-data.html"><a href="import-data.html"><i class="fa fa-check"></i>Import Data</a>
<ul>
<li class="chapter" data-level="" data-path="import-data.html"><a href="import-data.html#epfr-stock-factor-data"><i class="fa fa-check"></i>EPFR Stock Factor data</a></li>
<li class="chapter" data-level="" data-path="import-data.html"><a href="import-data.html#returns-data"><i class="fa fa-check"></i>Returns data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="strategy-implementation-8.html"><a href="strategy-implementation-8.html"><i class="fa fa-check"></i>Strategy Implementation</a>
<ul>
<li class="chapter" data-level="" data-path="strategy-implementation-8.html"><a href="strategy-implementation-8.html#results"><i class="fa fa-check"></i>Results</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>FAQ</b></span></li>
<li class="chapter" data-level="" data-path="epfr-macro-strategey-files.html"><a href="epfr-macro-strategey-files.html"><i class="fa fa-check"></i>EPFR Macro Strategey Files</a></li>
<li class="chapter" data-level="" data-path="returns-information.html"><a href="returns-information.html"><i class="fa fa-check"></i>Returns Information</a></li>
<li class="chapter" data-level="" data-path="country-flows.html"><a href="country-flows.html"><i class="fa fa-check"></i>Country Flows</a></li>
<li class="chapter" data-level="" data-path="stock-flows.html"><a href="stock-flows.html"><i class="fa fa-check"></i>Stock Flows</a></li>
<li class="chapter" data-level="" data-path="geographic-focus-breakdown.html"><a href="geographic-focus-breakdown.html"><i class="fa fa-check"></i>Geographic Focus Breakdown</a>
<ul>
<li class="chapter" data-level="" data-path="geographic-focus-breakdown.html"><a href="geographic-focus-breakdown.html#stock-flows-geofocus-breakdown"><i class="fa fa-check"></i>Stock Flows GeoFocus Breakdown</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://epfr.com/" target="blank">EPFR</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">EPFR Strategy Notebooks</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="multi-asset-fi-strategy" class="section level2 unnumbered hasAnchor">
<h2>Multi Asset FI Strategy<a href="multi-asset-fi-strategy.html#multi-asset-fi-strategy" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This is a Multi-Asset Strategy, where we are essentially rotating between asset classes within equity and fixed-income universes. The following code recreates the Multi-Asset fixed income flow strategy using the API. To learn more about this strategy you can read <a href="multi-asset-strategy.html#multi-asset-strategy">Multi-Asset Strategy</a> section of this notebook.<br></p>
<p>The API returns data grouped by asset class and geographic focus, but this strategy the data is divided by other filters (e.g. short, medium, or long term bonds). For non asset class and geographic focus categories require separate API calls will need to be made for each category. <br></p>
<p>Each category is defined in a list with 3 elements: category name, asset class, and bond filter.</p>
<table>
<colgroup>
<col width="13%" />
<col width="24%" />
<col width="13%" />
<col width="26%" />
<col width="21%" />
</colgroup>
<thead>
<tr class="header">
<th>Category</th>
<th>Asset Class</th>
<th>AC ID</th>
<th>Bond Filter</th>
<th>Bond Filter ID</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GLOBEM</td>
<td>global EMs bond</td>
<td>FF223002</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>HYIELD</td>
<td>all bonds</td>
<td>FF200000</td>
<td>high yield</td>
<td>B100013</td>
</tr>
<tr class="odd">
<td>FLOATS</td>
<td>all bonds</td>
<td>FF200000</td>
<td>bank loan</td>
<td>B100016</td>
</tr>
<tr class="even">
<td>USTRIN</td>
<td>usa bonds</td>
<td>FF213002</td>
<td>intermediate term</td>
<td>B100009</td>
</tr>
<tr class="odd">
<td>USTRLT</td>
<td>usa bonds</td>
<td>FF213002</td>
<td>long term</td>
<td>B100008</td>
</tr>
<tr class="even">
<td>USTRST</td>
<td>usa bonds</td>
<td>FF213002</td>
<td>short term</td>
<td>B100010</td>
</tr>
<tr class="odd">
<td>Cash</td>
<td>all money market</td>
<td>FF400000</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>USMUNI</td>
<td>usa bonds</td>
<td>FF213002</td>
<td>municipal</td>
<td>B100019</td>
</tr>
<tr class="odd">
<td>GLOFIX</td>
<td>global bond</td>
<td>FF212000</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="multi-asset-fi-strategy.html#cb49-1" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="st">&quot;FF&quot;</span></span>
<span id="cb49-2"><a href="multi-asset-fi-strategy.html#cb49-2" tabindex="-1"></a>from_date <span class="ot">&lt;-</span> <span class="st">&quot;05-04-2007&quot;</span></span>
<span id="cb49-3"><a href="multi-asset-fi-strategy.html#cb49-3" tabindex="-1"></a>to_date <span class="ot">&lt;-</span> <span class="st">&quot;07-28-2025&quot;</span>  <span class="co"># TODAY&#39;S DATE</span></span>
<span id="cb49-4"><a href="multi-asset-fi-strategy.html#cb49-4" tabindex="-1"></a>frequency <span class="ot">&lt;-</span> <span class="st">&quot;Daily&quot;</span></span>
<span id="cb49-5"><a href="multi-asset-fi-strategy.html#cb49-5" tabindex="-1"></a>level  <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb49-6"><a href="multi-asset-fi-strategy.html#cb49-6" tabindex="-1"></a>categories <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">13</span>, <span class="dv">3</span>) <span class="co"># ASSETS START, FLOW USD</span></span>
<span id="cb49-7"><a href="multi-asset-fi-strategy.html#cb49-7" tabindex="-1"></a>assets <span class="ot">&lt;-</span> <span class="st">&quot;true&quot;</span></span>
<span id="cb49-8"><a href="multi-asset-fi-strategy.html#cb49-8" tabindex="-1"></a></span>
<span id="cb49-9"><a href="multi-asset-fi-strategy.html#cb49-9" tabindex="-1"></a>filters <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="st">&quot;GLOBEM&quot;</span>, <span class="st">&quot;FF223002&quot;</span>, <span class="cn">NULL</span>), </span>
<span id="cb49-10"><a href="multi-asset-fi-strategy.html#cb49-10" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;HYIELD&quot;</span>, <span class="st">&quot;FF200000&quot;</span>, <span class="st">&quot;B100013&quot;</span>), </span>
<span id="cb49-11"><a href="multi-asset-fi-strategy.html#cb49-11" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;FLOATS&quot;</span>, <span class="st">&quot;FF200000&quot;</span>, <span class="st">&quot;B100016&quot;</span>), </span>
<span id="cb49-12"><a href="multi-asset-fi-strategy.html#cb49-12" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;USTRIN&quot;</span>, <span class="st">&quot;FF213002&quot;</span>, <span class="st">&quot;B100009&quot;</span>), </span>
<span id="cb49-13"><a href="multi-asset-fi-strategy.html#cb49-13" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;USTRLT&quot;</span>, <span class="st">&quot;FF213002&quot;</span>, <span class="st">&quot;B100008&quot;</span>), </span>
<span id="cb49-14"><a href="multi-asset-fi-strategy.html#cb49-14" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;USTRST&quot;</span>, <span class="st">&quot;FF213002&quot;</span>, <span class="st">&quot;B100010&quot;</span>), </span>
<span id="cb49-15"><a href="multi-asset-fi-strategy.html#cb49-15" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;CASH&quot;</span>, <span class="st">&quot;FF400000&quot;</span>, <span class="cn">NULL</span>), </span>
<span id="cb49-16"><a href="multi-asset-fi-strategy.html#cb49-16" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;USMUNI&quot;</span>, <span class="st">&quot;FF213002&quot;</span>, <span class="st">&quot;B100019&quot;</span>), </span>
<span id="cb49-17"><a href="multi-asset-fi-strategy.html#cb49-17" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;GLOFIX&quot;</span>, <span class="st">&quot;FF212000&quot;</span>, <span class="cn">NULL</span>))</span></code></pre></div>
<p>Rather than 1 API call like the multi-asset region strategy this code will loop over the categories which were set in the filters list and make an API call for each category individually.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="multi-asset-fi-strategy.html#cb50-1" tabindex="-1"></a>result_multiAsset_FI_daily <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb50-2"><a href="multi-asset-fi-strategy.html#cb50-2" tabindex="-1"></a></span>
<span id="cb50-3"><a href="multi-asset-fi-strategy.html#cb50-3" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(filters)) {</span>
<span id="cb50-4"><a href="multi-asset-fi-strategy.html#cb50-4" tabindex="-1"></a></span>
<span id="cb50-5"><a href="multi-asset-fi-strategy.html#cb50-5" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;Calling data for: &quot;</span>, filters[[i]][[<span class="dv">1</span>]]))</span>
<span id="cb50-6"><a href="multi-asset-fi-strategy.html#cb50-6" tabindex="-1"></a></span>
<span id="cb50-7"><a href="multi-asset-fi-strategy.html#cb50-7" tabindex="-1"></a>  report <span class="ot">&lt;-</span> <span class="fu">epfr.get.reportid</span>(dataset,</span>
<span id="cb50-8"><a href="multi-asset-fi-strategy.html#cb50-8" tabindex="-1"></a>                              from_date,</span>
<span id="cb50-9"><a href="multi-asset-fi-strategy.html#cb50-9" tabindex="-1"></a>                              to_date,</span>
<span id="cb50-10"><a href="multi-asset-fi-strategy.html#cb50-10" tabindex="-1"></a>                              <span class="fu">list</span>(filters[[i]][[<span class="dv">2</span>]]), <span class="co"># ASSET CLASS</span></span>
<span id="cb50-11"><a href="multi-asset-fi-strategy.html#cb50-11" tabindex="-1"></a>                              frequency,</span>
<span id="cb50-12"><a href="multi-asset-fi-strategy.html#cb50-12" tabindex="-1"></a>                              level,</span>
<span id="cb50-13"><a href="multi-asset-fi-strategy.html#cb50-13" tabindex="-1"></a>                              categories,</span>
<span id="cb50-14"><a href="multi-asset-fi-strategy.html#cb50-14" tabindex="-1"></a>                              <span class="cn">NULL</span>,</span>
<span id="cb50-15"><a href="multi-asset-fi-strategy.html#cb50-15" tabindex="-1"></a>                              <span class="cn">NULL</span>,</span>
<span id="cb50-16"><a href="multi-asset-fi-strategy.html#cb50-16" tabindex="-1"></a>                              assets,</span>
<span id="cb50-17"><a href="multi-asset-fi-strategy.html#cb50-17" tabindex="-1"></a>                              <span class="cn">NULL</span>,</span>
<span id="cb50-18"><a href="multi-asset-fi-strategy.html#cb50-18" tabindex="-1"></a>                              <span class="cn">NULL</span>,</span>
<span id="cb50-19"><a href="multi-asset-fi-strategy.html#cb50-19" tabindex="-1"></a>                              <span class="cf">if</span> (<span class="fu">is.null</span>(filters[[i]][[<span class="dv">3</span>]])) <span class="cn">NULL</span> <span class="cf">else</span> <span class="fu">list</span>(filters[[i]][[<span class="dv">3</span>]]),</span>
<span id="cb50-20"><a href="multi-asset-fi-strategy.html#cb50-20" tabindex="-1"></a>                              <span class="cn">NULL</span>) <span class="co"># BOND FILTER</span></span>
<span id="cb50-21"><a href="multi-asset-fi-strategy.html#cb50-21" tabindex="-1"></a></span>
<span id="cb50-22"><a href="multi-asset-fi-strategy.html#cb50-22" tabindex="-1"></a>  report_id <span class="ot">&lt;-</span> report<span class="sc">$</span>data<span class="sc">$</span>reportId</span>
<span id="cb50-23"><a href="multi-asset-fi-strategy.html#cb50-23" tabindex="-1"></a>  <span class="fu">wait_for_completion</span>(report_id, dataset, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb50-24"><a href="multi-asset-fi-strategy.html#cb50-24" tabindex="-1"></a>  result_catagory <span class="ot">&lt;-</span> <span class="fu">epfr.get.reportoutput</span>(<span class="at">dataset =</span> <span class="st">&quot;FF&quot;</span>,  <span class="at">report_id =</span> <span class="fu">toString</span>(report_id))</span>
<span id="cb50-25"><a href="multi-asset-fi-strategy.html#cb50-25" tabindex="-1"></a></span>
<span id="cb50-26"><a href="multi-asset-fi-strategy.html#cb50-26" tabindex="-1"></a>  restult_catagory_clean <span class="ot">&lt;-</span>  result_catagory <span class="sc">%&gt;%</span></span>
<span id="cb50-27"><a href="multi-asset-fi-strategy.html#cb50-27" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">FloPct =</span> <span class="dv">100</span> <span class="sc">*</span><span class="st">`</span><span class="at">Flow US$ mill</span><span class="st">`</span> <span class="sc">/</span> <span class="st">`</span><span class="at">Total Net Assets Start</span><span class="st">`</span>,</span>
<span id="cb50-28"><a href="multi-asset-fi-strategy.html#cb50-28" tabindex="-1"></a>           <span class="at">Date =</span> <span class="fu">as.Date</span>(Date, <span class="at">format =</span> <span class="st">&quot;%m/%d/%Y&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb50-29"><a href="multi-asset-fi-strategy.html#cb50-29" tabindex="-1"></a>    <span class="fu">select</span>(Date, FloPct) <span class="sc">%&gt;%</span></span>
<span id="cb50-30"><a href="multi-asset-fi-strategy.html#cb50-30" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="sc">!!</span>filters[[i]][[<span class="dv">1</span>]] <span class="sc">:=</span> FloPct)</span>
<span id="cb50-31"><a href="multi-asset-fi-strategy.html#cb50-31" tabindex="-1"></a></span>
<span id="cb50-32"><a href="multi-asset-fi-strategy.html#cb50-32" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(result_multiAsset_FI_daily)) {</span>
<span id="cb50-33"><a href="multi-asset-fi-strategy.html#cb50-33" tabindex="-1"></a>    result_multiAsset_FI_daily <span class="ot">&lt;-</span> restult_catagory_clean</span>
<span id="cb50-34"><a href="multi-asset-fi-strategy.html#cb50-34" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb50-35"><a href="multi-asset-fi-strategy.html#cb50-35" tabindex="-1"></a>    result_multiAsset_FI_daily <span class="ot">&lt;-</span> result_multiAsset_FI_daily <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(restult_catagory_clean, <span class="at">by =</span> <span class="st">&quot;Date&quot;</span>)</span>
<span id="cb50-36"><a href="multi-asset-fi-strategy.html#cb50-36" tabindex="-1"></a>  }</span>
<span id="cb50-37"><a href="multi-asset-fi-strategy.html#cb50-37" tabindex="-1"></a></span>
<span id="cb50-38"><a href="multi-asset-fi-strategy.html#cb50-38" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Calling data for: GLOBEM&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: HYIELD&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: FLOATS&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: USTRIN&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: USTRLT&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: USTRST&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: CASH&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report Incomplete time taken: 50&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 50 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: USMUNI&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report Incomplete time taken: 50&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 50 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: GLOFIX&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<p>Check top rows of output</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="multi-asset-fi-strategy.html#cb80-1" tabindex="-1"></a><span class="fu">print</span>(result_multiAsset_FI_daily <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(Date)) <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="dv">10</span>))</span></code></pre></div>
<pre><code>## Selecting by GLOFIX</code></pre>
<pre><code>##          Date       GLOBEM       HYIELD        FLOATS       USTRIN
## 1  2019-06-05 -0.027973673  0.095349939 -1.986875e-01  0.017754130
## 2  2014-05-26  0.052150203 -0.009375418 -4.833925e-05  0.002452491
## 3  2010-04-27  0.337626898  0.102939204  2.648442e-01  0.003090153
## 4  2010-04-16  0.412729663  0.071102211  4.498816e-01 -0.010467910
## 5  2010-03-03  0.241326277  0.080321108  2.213384e-01  0.086721195
## 6  2010-01-20  0.336657121  0.061601315  2.117595e-01  0.033362382
## 7  2009-10-27  0.378240427  0.057028006  6.040198e-02  0.013198485
## 8  2009-10-19  0.004537369  0.059400831 -1.519629e-01  0.120914681
## 9  2009-07-16  0.258998344  0.038666555  1.033427e-01  0.125271758
## 10 2009-07-06  0.013040701  0.032163965  3.548821e-01 -0.252164132
##           USTRLT       USTRST        CASH       USMUNI    GLOFIX
## 1   0.0094597003  0.161545751  0.07296099  0.041762856 0.4192535
## 2  -0.0004529216 -0.001894318 -0.18786452 -0.001107607 0.3851974
## 3   0.1746803397  0.060233419  0.09827931  0.008093416 0.3946408
## 4   0.0531455393  0.084548698 -0.13591913  0.005558984 0.3806760
## 5   0.0254124393  0.297141051  0.09449447  0.047171225 0.4351618
## 6   0.0255387233  0.216424610 -0.04047568  0.059016325 0.3594302
## 7  -0.0056885979  0.260901866  0.14915884  0.077428898 0.3631106
## 8   0.0139185586  0.304233598  0.07399531  0.084478738 0.4147324
## 9  -0.0324791901  0.234874767  0.22492439  0.072136681 0.3610647
## 10  0.0004447055  0.363236243  0.23548421  0.078464357 0.5482938</code></pre>
<p>Write the resulting dataframe to disk</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="multi-asset-fi-strategy.html#cb83-1" tabindex="-1"></a><span class="fu">write.csv</span>(result_multiAsset_FI_daily, <span class="fu">paste0</span>(dir, <span class="st">&quot;result_multiAsset_FI_daily.csv&quot;</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="api-multi-asset-region-strategy.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="api-dictionaries.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": true,
    "facebook": false,
    "twitter": false,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": false
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/EPFR/EPFR-QuantNotebooks/docs/00-EPFRAPI.Rmd",
    "text": "Suggest an edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
