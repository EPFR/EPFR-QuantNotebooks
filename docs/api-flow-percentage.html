<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>API Flow-Percentage | EPFR Strategy Notebooks</title>
  <meta name="description" content="The objective of this book is to present EPFRs proof of concept strategies so that readers have a profound understanding of how to use our EPFR’s flow and allocation dataset, construct a signal, and find initial value." />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="API Flow-Percentage | EPFR Strategy Notebooks" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://epfr.github.io/EPFR-QuantNotebooks/images/EPFR_Icon.png" />
  <meta property="og:description" content="The objective of this book is to present EPFRs proof of concept strategies so that readers have a profound understanding of how to use our EPFR’s flow and allocation dataset, construct a signal, and find initial value." />
  <meta name="github-repo" content="EPFR/EPFR-QuantNotebooks" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="API Flow-Percentage | EPFR Strategy Notebooks" />
  
  <meta name="twitter:description" content="The objective of this book is to present EPFRs proof of concept strategies so that readers have a profound understanding of how to use our EPFR’s flow and allocation dataset, construct a signal, and find initial value." />
  <meta name="twitter:image" content="https://epfr.github.io/EPFR-QuantNotebooks/images/EPFR_Icon.png" />




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="quick-start.html"/>
<link rel="next" href="api-dictionaries.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { font-weight: bold; } /* Alert */
code span.an { font-style: italic; } /* Annotation */
code span.cf { font-weight: bold; } /* ControlFlow */
code span.co { font-style: italic; } /* Comment */
code span.cv { font-style: italic; } /* CommentVar */
code span.do { font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.er { font-weight: bold; } /* Error */
code span.in { font-style: italic; } /* Information */
code span.kw { font-weight: bold; } /* Keyword */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.wa { font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/comingsoon.png"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="macro-strategy-signals.html"><a href="macro-strategy-signals.html"><i class="fa fa-check"></i>Macro Strategy Signals</a>
<ul>
<li class="chapter" data-level="" data-path="macro-strategy-signals.html"><a href="macro-strategy-signals.html#flow-momentum"><i class="fa fa-check"></i>Flow Momentum</a></li>
<li class="chapter" data-level="" data-path="macro-strategy-signals.html"><a href="macro-strategy-signals.html#activepassive-indicator"><i class="fa fa-check"></i>Active/Passive Indicator</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="epfr-stock-factors.html"><a href="epfr-stock-factors.html"><i class="fa fa-check"></i>EPFR Stock Factors</a>
<ul>
<li class="chapter" data-level="" data-path="epfr-stock-factors.html"><a href="epfr-stock-factors.html#daily-factors"><i class="fa fa-check"></i>Daily Factors:</a></li>
<li class="chapter" data-level="" data-path="epfr-stock-factors.html"><a href="epfr-stock-factors.html#monthly-factors"><i class="fa fa-check"></i>Monthly Factors:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="epfr-api.html"><a href="epfr-api.html"><i class="fa fa-check"></i>EPFR API</a>
<ul>
<li class="chapter" data-level="" data-path="quick-start.html"><a href="quick-start.html"><i class="fa fa-check"></i>Quick Start</a>
<ul>
<li class="chapter" data-level="" data-path="quick-start.html"><a href="quick-start.html#api-install"><i class="fa fa-check"></i>API Install</a></li>
<li class="chapter" data-level="" data-path="quick-start.html"><a href="quick-start.html#api-login"><i class="fa fa-check"></i>API Login</a></li>
<li class="chapter" data-level="" data-path="quick-start.html"><a href="quick-start.html#api-call"><i class="fa fa-check"></i>API Call</a></li>
<li class="chapter" data-level="" data-path="quick-start.html"><a href="quick-start.html#example-api-call"><i class="fa fa-check"></i>Example API call</a></li>
<li class="chapter" data-level="" data-path="quick-start.html"><a href="quick-start.html#api-date-format"><i class="fa fa-check"></i>API Date Format</a></li>
<li class="chapter" data-level="" data-path="quick-start.html"><a href="quick-start.html#supplemental-libraries"><i class="fa fa-check"></i>Supplemental Libraries</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="api-flow-percentage.html"><a href="api-flow-percentage.html"><i class="fa fa-check"></i>API Flow-Percentage</a>
<ul>
<li class="chapter" data-level="" data-path="api-flow-percentage.html"><a href="api-flow-percentage.html#api-flow-percentage-country-strategy"><i class="fa fa-check"></i>API Flow-Percentage Country Strategy</a></li>
<li class="chapter" data-level="" data-path="api-flow-percentage.html"><a href="api-flow-percentage.html#api-multi-asset-region-strategy"><i class="fa fa-check"></i>API Multi-Asset Region Strategy</a></li>
<li class="chapter" data-level="" data-path="api-flow-percentage.html"><a href="api-flow-percentage.html#api-multi-asset-fi-strategy"><i class="fa fa-check"></i>API Multi-Asset FI Strategy</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="api-dictionaries.html"><a href="api-dictionaries.html"><i class="fa fa-check"></i>API Dictionaries</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="epfr.r-library.html"><a href="epfr.r-library.html"><i class="fa fa-check"></i>EPFR.r Library</a>
<ul>
<li class="chapter" data-level="" data-path="set-up.html"><a href="set-up.html"><i class="fa fa-check"></i>Set-up</a></li>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html"><i class="fa fa-check"></i>Strategy Functions</a>
<ul>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html#total-return-index"><i class="fa fa-check"></i>Total Return Index</a></li>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html#compunding-flows"><i class="fa fa-check"></i>Compunding Flows</a></li>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html#model"><i class="fa fa-check"></i>Model</a></li>
<li class="chapter" data-level="" data-path="strategy-functions.html"><a href="strategy-functions.html#example"><i class="fa fa-check"></i>Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="epfr-data-filters.html"><a href="epfr-data-filters.html"><i class="fa fa-check"></i>EPFR Data &amp; Filters</a>
<ul>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html"><i class="fa fa-check"></i>Video Explanations</a>
<ul>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#asset-class-focus"><i class="fa fa-check"></i>Asset class focus</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#fund-type"><i class="fa fa-check"></i>Fund type</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#investor-type"><i class="fa fa-check"></i>Investor type</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#currency-of-flows"><i class="fa fa-check"></i>Currency of flows</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#fund-domicile-or-geographic-focus"><i class="fa fa-check"></i>Fund domicile or Geographic focus</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#theme"><i class="fa fa-check"></i>Theme</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#sector"><i class="fa fa-check"></i>Sector</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#style"><i class="fa fa-check"></i>Style</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#duration"><i class="fa fa-check"></i>Duration</a></li>
<li class="chapter" data-level="" data-path="video-explanations.html"><a href="video-explanations.html#individual-managers"><i class="fa fa-check"></i>Individual managers</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Macro Strategies</b></span></li>
<li class="chapter" data-level="1" data-path="multi-asset-strategy.html"><a href="multi-asset-strategy.html"><i class="fa fa-check"></i><b>1</b> Multi-Asset Strategy</a>
<ul>
<li class="chapter" data-level="1.1" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>1.1</b> Data</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="data.html"><a href="data.html#aggregations"><i class="fa fa-check"></i><b>1.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="1.1.2" data-path="data.html"><a href="data.html#daily-percentage-flow"><i class="fa fa-check"></i><b>1.1.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="1.1.3" data-path="data.html"><a href="data.html#aggregate-flow-file"><i class="fa fa-check"></i><b>1.1.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="1.1.4" data-path="data.html"><a href="data.html#return-file"><i class="fa fa-check"></i><b>1.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="strategy-implementation.html"><a href="strategy-implementation.html"><i class="fa fa-check"></i><b>1.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="strategy-implementation.html"><a href="strategy-implementation.html#compounding-flows"><i class="fa fa-check"></i><b>1.2.1</b> Compounding Flows</a></li>
<li class="chapter" data-level="1.2.2" data-path="strategy-implementation.html"><a href="strategy-implementation.html#total-return-index-1"><i class="fa fa-check"></i><b>1.2.2</b> Total Return Index</a></li>
<li class="chapter" data-level="1.2.3" data-path="strategy-implementation.html"><a href="strategy-implementation.html#subset-files"><i class="fa fa-check"></i><b>1.2.3</b> Subset files</a></li>
<li class="chapter" data-level="1.2.4" data-path="strategy-implementation.html"><a href="strategy-implementation.html#ranking-asset-classes"><i class="fa fa-check"></i><b>1.2.4</b> Ranking Asset Classes</a></li>
<li class="chapter" data-level="1.2.5" data-path="strategy-implementation.html"><a href="strategy-implementation.html#model-1"><i class="fa fa-check"></i><b>1.2.5</b> Model</a></li>
<li class="chapter" data-level="1.2.6" data-path="strategy-implementation.html"><a href="strategy-implementation.html#performance"><i class="fa fa-check"></i><b>1.2.6</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="fx-strategy.html"><a href="fx-strategy.html"><i class="fa fa-check"></i><b>2</b> FX Strategy</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-1.html"><a href="data-1.html"><i class="fa fa-check"></i><b>2.1</b> Data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-1.html"><a href="data-1.html#aggregations-1"><i class="fa fa-check"></i><b>2.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-1.html"><a href="data-1.html#daily-percentage-flow-1"><i class="fa fa-check"></i><b>2.1.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-1.html"><a href="data-1.html#aggregate-flow-file-1"><i class="fa fa-check"></i><b>2.1.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="2.1.4" data-path="data-1.html"><a href="data-1.html#return-file-1"><i class="fa fa-check"></i><b>2.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="strategy-implementation-1.html"><a href="strategy-implementation-1.html"><i class="fa fa-check"></i><b>2.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="strategy-implementation-1.html"><a href="strategy-implementation-1.html#compounding-flows-1"><i class="fa fa-check"></i><b>2.2.1</b> Compounding Flows</a></li>
<li class="chapter" data-level="2.2.2" data-path="strategy-implementation-1.html"><a href="strategy-implementation-1.html#ranking-currencies"><i class="fa fa-check"></i><b>2.2.2</b> Ranking Currencies</a></li>
<li class="chapter" data-level="2.2.3" data-path="strategy-implementation-1.html"><a href="strategy-implementation-1.html#model-2"><i class="fa fa-check"></i><b>2.2.3</b> Model</a></li>
<li class="chapter" data-level="2.2.4" data-path="strategy-implementation-1.html"><a href="strategy-implementation-1.html#performance-1"><i class="fa fa-check"></i><b>2.2.4</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="flow-percentage-country-strategy.html"><a href="flow-percentage-country-strategy.html"><i class="fa fa-check"></i><b>3</b> Flow-Percentage Country Strategy</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-2.html"><a href="data-2.html"><i class="fa fa-check"></i><b>3.1</b> Data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-2.html"><a href="data-2.html#aggregations-2"><i class="fa fa-check"></i><b>3.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-2.html"><a href="data-2.html#daily-percentage-flow-2"><i class="fa fa-check"></i><b>3.1.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-2.html"><a href="data-2.html#aggregate-flow-file-2"><i class="fa fa-check"></i><b>3.1.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="3.1.4" data-path="data-2.html"><a href="data-2.html#return-file-2"><i class="fa fa-check"></i><b>3.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html"><i class="fa fa-check"></i><b>3.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#compounding-flows-2"><i class="fa fa-check"></i><b>3.2.1</b> Compounding Flows</a></li>
<li class="chapter" data-level="3.2.2" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#total-return-index-2"><i class="fa fa-check"></i><b>3.2.2</b> Total Return Index</a></li>
<li class="chapter" data-level="3.2.3" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#ranking-countries"><i class="fa fa-check"></i><b>3.2.3</b> Ranking Countries</a></li>
<li class="chapter" data-level="3.2.4" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#model-3"><i class="fa fa-check"></i><b>3.2.4</b> Model</a></li>
<li class="chapter" data-level="3.2.5" data-path="strategy-implementation-2.html"><a href="strategy-implementation-2.html#performance-2"><i class="fa fa-check"></i><b>3.2.5</b> Performance</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="publications.html"><a href="publications.html"><i class="fa fa-check"></i><b>3.3</b> Publications</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="flow-percentage-sector-strategy.html"><a href="flow-percentage-sector-strategy.html"><i class="fa fa-check"></i><b>4</b> Flow-Percentage Sector Strategy</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-3.html"><a href="data-3.html"><i class="fa fa-check"></i><b>4.1</b> Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-3.html"><a href="data-3.html#aggregations-3"><i class="fa fa-check"></i><b>4.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-3.html"><a href="data-3.html#daily-percentage-flow-3"><i class="fa fa-check"></i><b>4.1.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="4.1.3" data-path="data-3.html"><a href="data-3.html#aggregate-flow-file-3"><i class="fa fa-check"></i><b>4.1.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="4.1.4" data-path="data-3.html"><a href="data-3.html#return-file-3"><i class="fa fa-check"></i><b>4.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html"><i class="fa fa-check"></i><b>4.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#compounding-flows-3"><i class="fa fa-check"></i><b>4.2.1</b> Compounding Flows</a></li>
<li class="chapter" data-level="4.2.2" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#total-return-index-3"><i class="fa fa-check"></i><b>4.2.2</b> Total Return Index</a></li>
<li class="chapter" data-level="4.2.3" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#ranking-sectors"><i class="fa fa-check"></i><b>4.2.3</b> Ranking Sectors</a></li>
<li class="chapter" data-level="4.2.4" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#model-4"><i class="fa fa-check"></i><b>4.2.4</b> Model</a></li>
<li class="chapter" data-level="4.2.5" data-path="strategy-implementation-3.html"><a href="strategy-implementation-3.html#performance-3"><i class="fa fa-check"></i><b>4.2.5</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="activepassive-country-strategy.html"><a href="activepassive-country-strategy.html"><i class="fa fa-check"></i><b>5</b> Active/Passive Country Strategy</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-4.html"><a href="data-4.html"><i class="fa fa-check"></i><b>5.1</b> Data</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="data-4.html"><a href="data-4.html#aggregations-4"><i class="fa fa-check"></i><b>5.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="5.1.2" data-path="data-4.html"><a href="data-4.html#activepassive-indicator-1"><i class="fa fa-check"></i><b>5.1.2</b> Active/Passive Indicator</a></li>
<li class="chapter" data-level="5.1.3" data-path="data-4.html"><a href="data-4.html#aggregate-indicator-file"><i class="fa fa-check"></i><b>5.1.3</b> Aggregate Indicator File</a></li>
<li class="chapter" data-level="5.1.4" data-path="data-4.html"><a href="data-4.html#return-file-4"><i class="fa fa-check"></i><b>5.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html"><i class="fa fa-check"></i><b>5.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#moving-sum-of-indicator"><i class="fa fa-check"></i><b>5.2.1</b> Moving Sum of Indicator</a></li>
<li class="chapter" data-level="5.2.2" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#total-return-index-4"><i class="fa fa-check"></i><b>5.2.2</b> Total Return Index</a></li>
<li class="chapter" data-level="5.2.3" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#ranking-countries-1"><i class="fa fa-check"></i><b>5.2.3</b> Ranking Countries</a></li>
<li class="chapter" data-level="5.2.4" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#model-5"><i class="fa fa-check"></i><b>5.2.4</b> Model</a></li>
<li class="chapter" data-level="5.2.5" data-path="strategy-implementation-4.html"><a href="strategy-implementation-4.html#performance-4"><i class="fa fa-check"></i><b>5.2.5</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="activepassive-sector-strategy.html"><a href="activepassive-sector-strategy.html"><i class="fa fa-check"></i><b>6</b> Active/Passive Sector Strategy</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-5.html"><a href="data-5.html"><i class="fa fa-check"></i><b>6.1</b> Data</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="data-5.html"><a href="data-5.html#aggregations-5"><i class="fa fa-check"></i><b>6.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="6.1.2" data-path="data-5.html"><a href="data-5.html#activepassive-indicator-2"><i class="fa fa-check"></i><b>6.1.2</b> Active/Passive Indicator</a></li>
<li class="chapter" data-level="6.1.3" data-path="data-5.html"><a href="data-5.html#aggregate-indicator-file-1"><i class="fa fa-check"></i><b>6.1.3</b> Aggregate Indicator File</a></li>
<li class="chapter" data-level="6.1.4" data-path="data-5.html"><a href="data-5.html#return-file-5"><i class="fa fa-check"></i><b>6.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html"><i class="fa fa-check"></i><b>6.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#moving-sum-of-indicator-1"><i class="fa fa-check"></i><b>6.2.1</b> Moving Sum of Indicator</a></li>
<li class="chapter" data-level="6.2.2" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#total-return-index-5"><i class="fa fa-check"></i><b>6.2.2</b> Total Return Index</a></li>
<li class="chapter" data-level="6.2.3" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#ranking-sectors-1"><i class="fa fa-check"></i><b>6.2.3</b> Ranking Sectors</a></li>
<li class="chapter" data-level="6.2.4" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#model-6"><i class="fa fa-check"></i><b>6.2.4</b> Model</a></li>
<li class="chapter" data-level="6.2.5" data-path="strategy-implementation-5.html"><a href="strategy-implementation-5.html#performance-5"><i class="fa fa-check"></i><b>6.2.5</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="flow-percentage-dm-rates-strategy.html"><a href="flow-percentage-dm-rates-strategy.html"><i class="fa fa-check"></i><b>7</b> Flow-Percentage DM Rates Strategy</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-6.html"><a href="data-6.html"><i class="fa fa-check"></i><b>7.1</b> Data</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="data-6.html"><a href="data-6.html#aggregations-6"><i class="fa fa-check"></i><b>7.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="7.1.2" data-path="data-6.html"><a href="data-6.html#daily-percentage-flow-4"><i class="fa fa-check"></i><b>7.1.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="7.1.3" data-path="data-6.html"><a href="data-6.html#aggregate-flow-file-4"><i class="fa fa-check"></i><b>7.1.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="7.1.4" data-path="data-6.html"><a href="data-6.html#return-file-6"><i class="fa fa-check"></i><b>7.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html"><i class="fa fa-check"></i><b>7.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html#compounding-flows-4"><i class="fa fa-check"></i><b>7.2.1</b> Compounding Flows</a></li>
<li class="chapter" data-level="7.2.2" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html#ranking-countries-2"><i class="fa fa-check"></i><b>7.2.2</b> Ranking Countries</a></li>
<li class="chapter" data-level="7.2.3" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html#model-7"><i class="fa fa-check"></i><b>7.2.3</b> Model</a></li>
<li class="chapter" data-level="7.2.4" data-path="strategy-implementation-6.html"><a href="strategy-implementation-6.html#performance-6"><i class="fa fa-check"></i><b>7.2.4</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Alternative Macro Strategies</b></span></li>
<li class="chapter" data-level="8" data-path="flow-percentage-daily-fixed-income-strategy.html"><a href="flow-percentage-daily-fixed-income-strategy.html"><i class="fa fa-check"></i><b>8</b> Flow-Percentage Daily Fixed-Income Strategy</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-7.html"><a href="data-7.html"><i class="fa fa-check"></i><b>8.1</b> Data</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="data-7.html"><a href="data-7.html#aggregations-7"><i class="fa fa-check"></i><b>8.1.1</b> Aggregations</a></li>
<li class="chapter" data-level="8.1.2" data-path="data-7.html"><a href="data-7.html#daily-percentage-flow-5"><i class="fa fa-check"></i><b>8.1.2</b> Daily Percentage Flow</a></li>
<li class="chapter" data-level="8.1.3" data-path="data-7.html"><a href="data-7.html#aggregate-flow-file-5"><i class="fa fa-check"></i><b>8.1.3</b> Aggregate Flow File</a></li>
<li class="chapter" data-level="8.1.4" data-path="data-7.html"><a href="data-7.html#return-file-7"><i class="fa fa-check"></i><b>8.1.4</b> Return File</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="strategy-implementation-7.html"><a href="strategy-implementation-7.html"><i class="fa fa-check"></i><b>8.2</b> Strategy Implementation</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="strategy-implementation-7.html"><a href="strategy-implementation-7.html#total-return-index-6"><i class="fa fa-check"></i><b>8.2.1</b> Total Return Index</a></li>
<li class="chapter" data-level="8.2.2" data-path="strategy-implementation-7.html"><a href="strategy-implementation-7.html#ranking-asset-classes-1"><i class="fa fa-check"></i><b>8.2.2</b> Ranking Asset Classes</a></li>
<li class="chapter" data-level="8.2.3" data-path="strategy-implementation-7.html"><a href="strategy-implementation-7.html#model-8"><i class="fa fa-check"></i><b>8.2.3</b> Model</a></li>
<li class="chapter" data-level="8.2.4" data-path="strategy-implementation-7.html"><a href="strategy-implementation-7.html#performance-7"><i class="fa fa-check"></i><b>8.2.4</b> Performance</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Stock Factors</b></span></li>
<li class="chapter" data-level="9" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>9</b> Overview</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#data-location"><i class="fa fa-check"></i>Data Location</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#data-derivation"><i class="fa fa-check"></i>Data Derivation</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="flow-momentum-1.html"><a href="flow-momentum-1.html"><i class="fa fa-check"></i><b>10</b> Flow Momentum</a>
<ul>
<li class="chapter" data-level="" data-path="flow-momentum-1.html"><a href="flow-momentum-1.html#flomo"><i class="fa fa-check"></i>FloMo</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="smart-money.html"><a href="smart-money.html"><i class="fa fa-check"></i><b>11</b> Smart Money</a>
<ul>
<li class="chapter" data-level="" data-path="smart-money.html"><a href="smart-money.html#references"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="smart-money.html"><a href="smart-money.html#flotrend"><i class="fa fa-check"></i>FloTrend</a></li>
<li class="chapter" data-level="" data-path="smart-money.html"><a href="smart-money.html#flodiff"><i class="fa fa-check"></i>FloDiff</a></li>
<li class="chapter" data-level="" data-path="smart-money.html"><a href="smart-money.html#flodiff2"><i class="fa fa-check"></i>FloDiff2</a></li>
<li class="chapter" data-level="" data-path="smart-money.html"><a href="smart-money.html#actwttrend"><i class="fa fa-check"></i>ActWtTrend</a></li>
<li class="chapter" data-level="" data-path="smart-money.html"><a href="smart-money.html#actwtdiff"><i class="fa fa-check"></i>ActWtDiff</a></li>
<li class="chapter" data-level="" data-path="smart-money.html"><a href="smart-money.html#actwtdiff2"><i class="fa fa-check"></i>ActWtDiff2</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="manager-momentum.html"><a href="manager-momentum.html"><i class="fa fa-check"></i><b>12</b> Manager momentum</a>
<ul>
<li class="chapter" data-level="" data-path="manager-momentum.html"><a href="manager-momentum.html#allocmo"><i class="fa fa-check"></i>AllocMo</a></li>
<li class="chapter" data-level="" data-path="manager-momentum.html"><a href="manager-momentum.html#alloctrend"><i class="fa fa-check"></i>AllocTrend</a></li>
<li class="chapter" data-level="" data-path="manager-momentum.html"><a href="manager-momentum.html#allocdiff"><i class="fa fa-check"></i>AllocDiff</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="ownership-dispersion.html"><a href="ownership-dispersion.html"><i class="fa fa-check"></i><b>13</b> Ownership Dispersion</a>
<ul>
<li class="chapter" data-level="" data-path="ownership-dispersion.html"><a href="ownership-dispersion.html#herfindahl"><i class="fa fa-check"></i>Herfindahl</a></li>
<li class="chapter" data-level="" data-path="ownership-dispersion.html"><a href="ownership-dispersion.html#fund-count"><i class="fa fa-check"></i>Fund Count</a></li>
<li class="chapter" data-level="" data-path="ownership-dispersion.html"><a href="ownership-dispersion.html#references-1"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="conviction.html"><a href="conviction.html"><i class="fa fa-check"></i><b>14</b> Conviction</a>
<ul>
<li class="chapter" data-level="" data-path="conviction.html"><a href="conviction.html#allocskew"><i class="fa fa-check"></i>AllocSkew</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="index-curse-share-suprise.html"><a href="index-curse-share-suprise.html"><i class="fa fa-check"></i><b>15</b> Index Curse (Share Suprise)</a>
<ul>
<li class="chapter" data-level="" data-path="index-curse-share-suprise.html"><a href="index-curse-share-suprise.html#shssurp"><i class="fa fa-check"></i>ShsSurp</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="backtest-example.html"><a href="backtest-example.html"><i class="fa fa-check"></i><b>16</b> Backtest Example</a>
<ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i>Functions</a>
<ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#file-name"><i class="fa fa-check"></i>File name</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#format-file"><i class="fa fa-check"></i>Format file</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#fetchs-file"><i class="fa fa-check"></i>Fetchs file</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="import-data.html"><a href="import-data.html"><i class="fa fa-check"></i>Import Data</a>
<ul>
<li class="chapter" data-level="" data-path="import-data.html"><a href="import-data.html#epfr-stock-factor-data"><i class="fa fa-check"></i>EPFR Stock Factor data</a></li>
<li class="chapter" data-level="" data-path="import-data.html"><a href="import-data.html#returns-data"><i class="fa fa-check"></i>Returns data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="strategy-implementation-8.html"><a href="strategy-implementation-8.html"><i class="fa fa-check"></i>Strategy Implementation</a>
<ul>
<li class="chapter" data-level="" data-path="strategy-implementation-8.html"><a href="strategy-implementation-8.html#results"><i class="fa fa-check"></i>Results</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>FAQ</b></span></li>
<li class="chapter" data-level="" data-path="epfr-macro-strategey-files.html"><a href="epfr-macro-strategey-files.html"><i class="fa fa-check"></i>EPFR Macro Strategey Files</a></li>
<li class="chapter" data-level="" data-path="returns-information.html"><a href="returns-information.html"><i class="fa fa-check"></i>Returns Information</a></li>
<li class="chapter" data-level="" data-path="country-flows.html"><a href="country-flows.html"><i class="fa fa-check"></i>Country Flows</a></li>
<li class="chapter" data-level="" data-path="stock-flows.html"><a href="stock-flows.html"><i class="fa fa-check"></i>Stock Flows</a></li>
<li class="chapter" data-level="" data-path="geographic-focus-breakdown.html"><a href="geographic-focus-breakdown.html"><i class="fa fa-check"></i>Geographic Focus Breakdown</a>
<ul>
<li class="chapter" data-level="" data-path="geographic-focus-breakdown.html"><a href="geographic-focus-breakdown.html#stock-flows-geofocus-breakdown"><i class="fa fa-check"></i>Stock Flows GeoFocus Breakdown</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://epfr.com/" target="blank">EPFR</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">EPFR Strategy Notebooks</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="api-flow-percentage" class="section level2 unnumbered hasAnchor">
<h2>API Flow-Percentage<a href="api-flow-percentage.html#api-flow-percentage" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This chapter will cover recreating daily percentage flows for some of EPFR’s macro strategies, by retrieving data via the API. <br></p>
<p>This chapter includes recreations for,</p>
<ul>
<li>Flow-Percentage Country Strategy</li>
<li>Multi-Asset Region Strategy</li>
<li>Multi-Asset FI Strategy</li>
</ul>
<div id="api-flow-percentage-country-strategy" class="section level3 unnumbered hasAnchor">
<h3>API Flow-Percentage Country Strategy<a href="api-flow-percentage.html#api-flow-percentage-country-strategy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The Flow-Percentage Country Strategy is an equity-based rotation strategy which ranks different countries across a customized universe of both developed and emerging markets. This approach uses the stated allocations of equity funds with a cross-border focus to calculate the percentage flow for each country. <br></p>
<p>More information about this strategy can be found under <a href="flow-percentage-country-strategy.html#flow-percentage-country-strategy">Flow-Percentage Country Strategy</a>.<br></p>
<p><a href="r%20downloads/API-FloPct-Ctry.r">Download the R Script source for this strategy</a><br></p>
<p>The steps to recreating the flow-percentage country strategy are as follows,</p>
<ul>
<li>Collect all equity country allocations.</li>
<li>Collect all cross-border equity fund flows.</li>
<li>Subset to funds reporting both allocations and fund flows.</li>
<li>Scale monthly country allocations against daily flow/AuM for each fund.</li>
<li>Divide the scaled flow by the scaled AuM to get the flow percentage for each country.</li>
</ul>
<p>We will be recreating daily percentage flow per country across one allocation month. <br></p>
<p>Both country allocations and fund flows use the same function epfr.get.reportid to create the report which returns data. Full documentation for the parameters of epfr.get.reportid can be in the <a href="https://developer.isimarkets.com/en/docs/epfr/api-v2/r/full-guide">API documentation</a>. <br></p>
<p><em>More about available filters, asset classes, and return value categories call the api dictionaries <a href="https://developer.isimarkets.com/en/docs/epfr/api-v2/r/quick-examples/get-dictionary-filters">available here</a>. </em><br></p>
<div id="api-country-allocations" class="section level4 unnumbered hasAnchor">
<h4>API Country Allocations<a href="api-flow-percentage.html#api-country-allocations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Step 1 is to retrieve country allocations for all available asset classes, across one month.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="api-flow-percentage.html#cb13-1" tabindex="-1"></a>alloc_month <span class="ot">&lt;-</span> <span class="st">&quot;202505&quot;</span></span>
<span id="cb13-2"><a href="api-flow-percentage.html#cb13-2" tabindex="-1"></a>date <span class="ot">&lt;-</span> <span class="fu">flow_to_api_date</span>(<span class="fu">yyyymm.to.day</span>(alloc_month))</span>
<span id="cb13-3"><a href="api-flow-percentage.html#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="api-flow-percentage.html#cb13-4" tabindex="-1"></a>all_acs <span class="ot">&lt;-</span> <span class="fu">as.list</span>(<span class="fu">epfr.get.dictionary.assetclasses</span>(<span class="st">&quot;CA&quot;</span>)<span class="sc">$</span>data <span class="sc">%&gt;%</span></span>
<span id="cb13-5"><a href="api-flow-percentage.html#cb13-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">&quot;Equity&quot;</span>, name)) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(id) <span class="sc">%&gt;%</span> <span class="fu">as.list</span>()) <span class="co"># ALL AVALIABLE ASSET CLASSES</span></span>
<span id="cb13-6"><a href="api-flow-percentage.html#cb13-6" tabindex="-1"></a></span>
<span id="cb13-7"><a href="api-flow-percentage.html#cb13-7" tabindex="-1"></a>report_ac <span class="ot">&lt;-</span> <span class="fu">epfr.get.reportid</span>(<span class="at">dataset =</span> <span class="st">&quot;CA&quot;</span>, </span>
<span id="cb13-8"><a href="api-flow-percentage.html#cb13-8" tabindex="-1"></a>                            <span class="at">from_date =</span> date, </span>
<span id="cb13-9"><a href="api-flow-percentage.html#cb13-9" tabindex="-1"></a>                            <span class="at">to_date =</span> date, </span>
<span id="cb13-10"><a href="api-flow-percentage.html#cb13-10" tabindex="-1"></a>                            <span class="at">asset_classes =</span> all_acs, </span>
<span id="cb13-11"><a href="api-flow-percentage.html#cb13-11" tabindex="-1"></a>                            <span class="at">frequency =</span>  <span class="st">&quot;Monthly&quot;</span>, </span>
<span id="cb13-12"><a href="api-flow-percentage.html#cb13-12" tabindex="-1"></a>                            <span class="at">level =</span> <span class="dv">2</span>, <span class="co"># FUND LEVEL</span></span>
<span id="cb13-13"><a href="api-flow-percentage.html#cb13-13" tabindex="-1"></a>                            <span class="at">categories =</span> <span class="fu">list</span>(<span class="dv">85</span>), <span class="co"># FUND ID</span></span>
<span id="cb13-14"><a href="api-flow-percentage.html#cb13-14" tabindex="-1"></a>                            <span class="at">average_type =</span> <span class="dv">1</span>, </span>
<span id="cb13-15"><a href="api-flow-percentage.html#cb13-15" tabindex="-1"></a>                            <span class="at">allocation_ids =</span> <span class="fu">as.list</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">187</span>)), <span class="co"># ALL COUNTRIES</span></span>
<span id="cb13-16"><a href="api-flow-percentage.html#cb13-16" tabindex="-1"></a>                            <span class="at">assets =</span> T, </span>
<span id="cb13-17"><a href="api-flow-percentage.html#cb13-17" tabindex="-1"></a>                            <span class="at">universal_filters =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-18"><a href="api-flow-percentage.html#cb13-18" tabindex="-1"></a>                            <span class="at">equity_filters =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-19"><a href="api-flow-percentage.html#cb13-19" tabindex="-1"></a>                            <span class="at">bond_filters =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-20"><a href="api-flow-percentage.html#cb13-20" tabindex="-1"></a>                            <span class="at">alternative_filters =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p>After the report ID is created, wait for report’s completion, then return the result.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="api-flow-percentage.html#cb14-1" tabindex="-1"></a>report_id_ac <span class="ot">&lt;-</span> report_ac<span class="sc">$</span>data<span class="sc">$</span>reportId</span>
<span id="cb14-2"><a href="api-flow-percentage.html#cb14-2" tabindex="-1"></a><span class="fu">wait_for_completion</span>(report_id_ac, <span class="st">&quot;CA&quot;</span>, <span class="at">inital_time_offset =</span> <span class="dv">20</span>, <span class="at">time_offset =</span> <span class="dv">10</span>) </span>
<span id="cb14-3"><a href="api-flow-percentage.html#cb14-3" tabindex="-1"></a>report_result_ca <span class="ot">&lt;-</span> <span class="fu">epfr.get.reportoutput</span>(<span class="st">&quot;CA&quot;</span>, report_id_ac) </span></code></pre></div>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<p>The resulting data frame will contain the allocation Date, FundID, Total Net Assets, and the funds weight towards individual countries (as a %), as well as it’s API asset class and any API filters (in this case “none”).</p>
<table class=" lightable-paper lightable-hover table" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Date
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
FundID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Total Net Assets
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Australia
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Brazil
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
China
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
USA
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Asset Class
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Filters
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
5/31/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
30470
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
53.1179
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Europe Regional-Western Europe-CA-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
5/31/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
91358
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
681.5458
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.5058
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.8725
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
67.2088
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Global-Global-CA-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
5/31/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
850
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
522.9530
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
8.0940
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
29.1253
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Global Emerging Markets-GEM-CA-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
5/31/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
98514
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
1167.1641
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
1.8673
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.8029
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
2.5642
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Global ex-US-Global-CA-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
5/31/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
13005
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
864.4328
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.4300
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.4800
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
2.9600
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
70.4200
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Global-Global-CA-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
5/31/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
92366
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
406.3273
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
13.2687
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
28.5633
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Asia ex-Japan Regional-Asia Ex-Japan-CA-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
5/31/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
271
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
841.3444
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7.8766
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
27.5127
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
2.5021
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Asia ex-Japan Regional-Asia Ex-Japan-CA-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
5/31/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
92368
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
1585.2415
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14.2611
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
28.0676
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Asia ex-Japan Regional-Asia Ex-Japan-CA-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
5/31/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
40529
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
466.0487
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
13.9533
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
23.9249
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Asia ex-Japan Regional-Asia Ex-Japan-CA-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
5/31/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
102060
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
75.6420
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
4.7855
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
24.6677
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Global Emerging Markets-GEM-CA-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
</tr>
</tbody>
</table>
<p>Transform data such that there is a column of FundIDs and the rest of columns are the country allocations for each fund in the data frame.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="api-flow-percentage.html#cb17-1" tabindex="-1"></a>curr_alloc_data <span class="ot">&lt;-</span> report_result_ca <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="api-flow-percentage.html#cb17-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(Date, Fund, <span class="st">`</span><span class="at">Total Net Assets</span><span class="st">`</span>, <span class="st">`</span><span class="at">Asset Class</span><span class="st">`</span>, Filters)) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="api-flow-percentage.html#cb17-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(</span>
<span id="cb17-4"><a href="api-flow-percentage.html#cb17-4" tabindex="-1"></a>    <span class="at">.cols =</span> <span class="sc">-</span><span class="fu">c</span>(FundID),</span>
<span id="cb17-5"><a href="api-flow-percentage.html#cb17-5" tabindex="-1"></a>    <span class="at">.fns =</span> <span class="sc">~</span> . <span class="sc">/</span> <span class="dv">100</span></span>
<span id="cb17-6"><a href="api-flow-percentage.html#cb17-6" tabindex="-1"></a>  ))</span>
<span id="cb17-7"><a href="api-flow-percentage.html#cb17-7" tabindex="-1"></a></span>
<span id="cb17-8"><a href="api-flow-percentage.html#cb17-8" tabindex="-1"></a><span class="fu">print</span>(curr_alloc_data <span class="sc">%&gt;%</span> <span class="fu">select</span>(FundID, Australia, Brazil, China, USA) <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="dv">10</span>))</span></code></pre></div>
<table class=" lightable-paper lightable-hover table" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
FundID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Australia
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Brazil
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
China
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
USA
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
10959
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.766340
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
78120
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.768722
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
3701
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.819344
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
88963
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.008400
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.876300
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
50111
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.013707
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000585
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.805743
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
15342
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.762000
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
90008
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.982066
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
13663
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.004851
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.844482
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
5168
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.004182
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.013083
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.784196
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
39696
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.000356
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.765399
</td>
</tr>
</tbody>
</table>
</div>
<div id="api-cross-border-fund-flows" class="section level4 unnumbered hasAnchor">
<h4>API Cross-Border Fund Flows<a href="api-flow-percentage.html#api-cross-border-fund-flows" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Next step is to retrieve the fund flows for all cross border funds which report allocations data. To do this query for all funds which have a cross border focus then filter the dataframe for FundIDs contained in the allocations dataframe <code>curr_alloc_data</code>.</p>
<p>First, we collect the start and end flow dates for the chosen allocation month.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="api-flow-percentage.html#cb18-1" tabindex="-1"></a>flow_dates <span class="ot">&lt;-</span> <span class="fu">flowdate.ex.AllocMo</span>(alloc_month)</span>
<span id="cb18-2"><a href="api-flow-percentage.html#cb18-2" tabindex="-1"></a>start_date_api <span class="ot">&lt;-</span> <span class="fu">flow_to_api_date</span>(flow_dates[<span class="dv">1</span>]) </span>
<span id="cb18-3"><a href="api-flow-percentage.html#cb18-3" tabindex="-1"></a>end_date_api <span class="ot">&lt;-</span> <span class="fu">flow_to_api_date</span>(flow_dates[<span class="fu">length</span>(flow_dates)])</span></code></pre></div>
<p>To get the cross border fund asset classes use the classif file, which is located in the sftp/ftp under <code>Classifications/classif-GeoId.txt</code>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="api-flow-percentage.html#cb19-1" tabindex="-1"></a>classif_geoid <span class="ot">&lt;-</span> read <span class="cf">in</span> file from ftp located at Classifications<span class="sc">/</span>classif<span class="sc">-</span>GeoId.txt</span>
<span id="cb19-2"><a href="api-flow-percentage.html#cb19-2" tabindex="-1"></a>xborder <span class="ot">&lt;-</span> classif_geoid <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="api-flow-percentage.html#cb19-3" tabindex="-1"></a>  <span class="fu">filter</span>(xBord <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="api-flow-percentage.html#cb19-4" tabindex="-1"></a>  <span class="fu">select</span>(ApiEquityId) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="api-flow-percentage.html#cb19-5" tabindex="-1"></a>  <span class="fu">pull</span>()</span></code></pre></div>
<p>Create the report id for the allocations data using the cross border ids. The report will return the FundIDs, flow USD and Net Assets Start for each fund over the time period.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="api-flow-percentage.html#cb20-1" tabindex="-1"></a>report_ff <span class="ot">&lt;-</span> <span class="fu">epfr.get.reportid</span>(<span class="at">dataset =</span> <span class="st">&quot;FF&quot;</span>, </span>
<span id="cb20-2"><a href="api-flow-percentage.html#cb20-2" tabindex="-1"></a>                            <span class="at">from_date =</span> start_date_api, </span>
<span id="cb20-3"><a href="api-flow-percentage.html#cb20-3" tabindex="-1"></a>                            <span class="at">to_date =</span> end_date_api,  </span>
<span id="cb20-4"><a href="api-flow-percentage.html#cb20-4" tabindex="-1"></a>                            <span class="at">asset_classes =</span> xborder, </span>
<span id="cb20-5"><a href="api-flow-percentage.html#cb20-5" tabindex="-1"></a>                            <span class="at">frequency =</span>  <span class="st">&quot;Daily&quot;</span>, </span>
<span id="cb20-6"><a href="api-flow-percentage.html#cb20-6" tabindex="-1"></a>                            <span class="at">level =</span> <span class="dv">2</span>, </span>
<span id="cb20-7"><a href="api-flow-percentage.html#cb20-7" tabindex="-1"></a>                            <span class="at">categories =</span> <span class="fu">list</span>(<span class="dv">53</span>, <span class="dv">3</span>, <span class="dv">13</span>), <span class="co">#  FUND ID, FLOW USD, NET ASSETS START </span></span>
<span id="cb20-8"><a href="api-flow-percentage.html#cb20-8" tabindex="-1"></a>                            <span class="at">average_type =</span> <span class="cn">NULL</span>, </span>
<span id="cb20-9"><a href="api-flow-percentage.html#cb20-9" tabindex="-1"></a>                            <span class="at">allocation_ids =</span> <span class="cn">NULL</span>, </span>
<span id="cb20-10"><a href="api-flow-percentage.html#cb20-10" tabindex="-1"></a>                            <span class="at">assets =</span> <span class="cn">NULL</span>, </span>
<span id="cb20-11"><a href="api-flow-percentage.html#cb20-11" tabindex="-1"></a>                            <span class="at">universal_filters =</span> <span class="cn">NULL</span>, </span>
<span id="cb20-12"><a href="api-flow-percentage.html#cb20-12" tabindex="-1"></a>                            <span class="at">equity_filters =</span> <span class="cn">NULL</span>, </span>
<span id="cb20-13"><a href="api-flow-percentage.html#cb20-13" tabindex="-1"></a>                            <span class="at">bond_filters =</span> <span class="cn">NULL</span>, </span>
<span id="cb20-14"><a href="api-flow-percentage.html#cb20-14" tabindex="-1"></a>                            <span class="at">alternative_filters =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p>After creating the report wait for completion.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="api-flow-percentage.html#cb21-1" tabindex="-1"></a>report_id_ff <span class="ot">&lt;-</span> report_ff<span class="sc">$</span>data<span class="sc">$</span>reportId</span>
<span id="cb21-2"><a href="api-flow-percentage.html#cb21-2" tabindex="-1"></a><span class="fu">wait_for_completion</span>(report_id_ff, <span class="st">&quot;FF&quot;</span>, <span class="dv">30</span>, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 30&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 30 seconds taken&quot;</code></pre>
<p>Examine the top rows of the output.</p>
<table class=" lightable-paper lightable-hover table" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Date
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Asset Class
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Filters
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Flow US$ mill
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Total Net Assets Start
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
FundID
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/22/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Asia ex-Japan Regional-Asia Ex-Japan-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.0002
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
50.6880
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
93036
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/22/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Global-Global-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
176.6451
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
77027
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/22/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Global-Global-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
24.6424
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
50120
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/22/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Global-Global-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0003
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
100.6267
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
77587
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/22/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Global-Global-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0580
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
180.8213
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
76996
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/22/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Global-Global-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.2588
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
1324.8773
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
94879
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/22/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Global-Global-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
1.3349
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
96822
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/22/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Global-Global-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.3366
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
70.8008
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
90098
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/22/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Global-Global-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0015
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.9452
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
91045
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/22/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Global-Global-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
None
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
12.0685
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
90121
</td>
</tr>
</tbody>
</table>
<p>We will only need the Date, FundID, Flow, and Total Net Assets Start to calculate the flow percentage, all other columns can be discarded.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="api-flow-percentage.html#cb24-1" tabindex="-1"></a>report_result_ff <span class="ot">&lt;-</span> <span class="fu">epfr.get.reportoutput</span>(<span class="st">&quot;FF&quot;</span>, report_id_ff) </span>
<span id="cb24-2"><a href="api-flow-percentage.html#cb24-2" tabindex="-1"></a></span>
<span id="cb24-3"><a href="api-flow-percentage.html#cb24-3" tabindex="-1"></a>curr_flow_data <span class="ot">&lt;-</span> report_result_ff <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="api-flow-percentage.html#cb24-4" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(Date, FundID,<span class="st">`</span><span class="at">Flow US$ mill</span><span class="st">`</span>, <span class="st">`</span><span class="at">Total Net Assets Start</span><span class="st">`</span>))</span>
<span id="cb24-5"><a href="api-flow-percentage.html#cb24-5" tabindex="-1"></a></span>
<span id="cb24-6"><a href="api-flow-percentage.html#cb24-6" tabindex="-1"></a><span class="fu">print</span>(curr_flow_data <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="dv">10</span>))</span></code></pre></div>
<table class=" lightable-paper lightable-hover table" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Date
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
FundID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Flow US$ mill
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Total Net Assets Start
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/22/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.5472
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
164576.2
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/18/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.7913
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
163995.9
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/15/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
1.1877
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
164019.1
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/14/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.3411
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
163990.0
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/11/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.6604
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
165373.9
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/10/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.5022
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
165113.8
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/7/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
84.7347
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
164311.4
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/4/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
164311.4
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/3/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
1.1156
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
164137.9
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/1/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
1.2995
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
163790.9
</td>
</tr>
</tbody>
</table>
</div>
<div id="calculating-flow-percentage-country" class="section level4 unnumbered hasAnchor">
<h4>Calculating Flow-Percentage Country<a href="api-flow-percentage.html#calculating-flow-percentage-country" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To calculate the percentage flow to a given country, for a single day we use the formula <span class="math inline">\(\frac{100 \times \sum{(Flow \times Country Allocation)}}{\sum{(AssetsStart\times Country Allocation)}}\)</span>. We will start by summing Total Fund Flows and Total Net Assets Start scaled by Country Allocations, separately.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="api-flow-percentage.html#cb25-1" tabindex="-1"></a><span class="co"># SCALE NET ASSETS START</span></span>
<span id="cb25-2"><a href="api-flow-percentage.html#cb25-2" tabindex="-1"></a>net_asset_start <span class="ot">&lt;-</span> curr_alloc_data <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="api-flow-percentage.html#cb25-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">FundID =</span> <span class="fu">as.character</span>(FundID)) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="api-flow-percentage.html#cb25-4" tabindex="-1"></a>  <span class="fu">inner_join</span>(curr_flow_data, <span class="at">by=</span><span class="st">&quot;FundID&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="api-flow-percentage.html#cb25-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(</span>
<span id="cb25-6"><a href="api-flow-percentage.html#cb25-6" tabindex="-1"></a>    <span class="at">.cols =</span> <span class="sc">-</span><span class="fu">c</span>(Date, FundID, <span class="st">`</span><span class="at">Total Net Assets Start</span><span class="st">`</span>, <span class="st">`</span><span class="at">Flow US$ mill</span><span class="st">`</span>),</span>
<span id="cb25-7"><a href="api-flow-percentage.html#cb25-7" tabindex="-1"></a>    <span class="at">.fns =</span> <span class="sc">~</span>.<span class="sc">*</span> <span class="st">`</span><span class="at">Total Net Assets Start</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-8"><a href="api-flow-percentage.html#cb25-8" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(FundID, <span class="st">`</span><span class="at">Total Net Assets Start</span><span class="st">`</span>, <span class="st">`</span><span class="at">Flow US$ mill</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-9"><a href="api-flow-percentage.html#cb25-9" tabindex="-1"></a>  <span class="fu">group_by</span>(Date) <span class="sc">%&gt;%</span></span>
<span id="cb25-10"><a href="api-flow-percentage.html#cb25-10" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), sum))</span>
<span id="cb25-11"><a href="api-flow-percentage.html#cb25-11" tabindex="-1"></a></span>
<span id="cb25-12"><a href="api-flow-percentage.html#cb25-12" tabindex="-1"></a><span class="co"># SCALE FLOW</span></span>
<span id="cb25-13"><a href="api-flow-percentage.html#cb25-13" tabindex="-1"></a>flow <span class="ot">&lt;-</span> curr_alloc_data <span class="sc">%&gt;%</span></span>
<span id="cb25-14"><a href="api-flow-percentage.html#cb25-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">FundID =</span> <span class="fu">as.character</span>(FundID)) <span class="sc">%&gt;%</span></span>
<span id="cb25-15"><a href="api-flow-percentage.html#cb25-15" tabindex="-1"></a>  <span class="fu">inner_join</span>(curr_flow_data, <span class="at">by=</span><span class="st">&quot;FundID&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-16"><a href="api-flow-percentage.html#cb25-16" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(</span>
<span id="cb25-17"><a href="api-flow-percentage.html#cb25-17" tabindex="-1"></a>    <span class="at">.cols =</span> <span class="sc">-</span><span class="fu">c</span>(Date, FundID, <span class="st">`</span><span class="at">Total Net Assets Start</span><span class="st">`</span>, <span class="st">`</span><span class="at">Flow US$ mill</span><span class="st">`</span>),</span>
<span id="cb25-18"><a href="api-flow-percentage.html#cb25-18" tabindex="-1"></a>    <span class="at">.fns =</span> <span class="sc">~</span>.<span class="sc">*</span> <span class="st">`</span><span class="at">Flow US$ mill</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-19"><a href="api-flow-percentage.html#cb25-19" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(FundID, <span class="st">`</span><span class="at">Total Net Assets Start</span><span class="st">`</span>, <span class="st">`</span><span class="at">Flow US$ mill</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-20"><a href="api-flow-percentage.html#cb25-20" tabindex="-1"></a>  <span class="fu">group_by</span>(Date) <span class="sc">%&gt;%</span></span>
<span id="cb25-21"><a href="api-flow-percentage.html#cb25-21" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), sum))</span></code></pre></div>
<p>We then calculate the weighted Total Fund Flow as a percentage over the weighted Total Net Assets Start, to get the Flow-Percentage for each country for a given Flow Date.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="api-flow-percentage.html#cb26-1" tabindex="-1"></a><span class="co"># CALCULATE FLOW PERCENTAGE</span></span>
<span id="cb26-2"><a href="api-flow-percentage.html#cb26-2" tabindex="-1"></a>flowpct <span class="ot">&lt;-</span> net_asset_start <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="api-flow-percentage.html#cb26-3" tabindex="-1"></a>  <span class="fu">inner_join</span>(flow, <span class="at">by=</span><span class="st">&quot;Date&quot;</span>, <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">&quot;_NAS&quot;</span>, <span class="st">&quot;_flow&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="api-flow-percentage.html#cb26-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(</span>
<span id="cb26-5"><a href="api-flow-percentage.html#cb26-5" tabindex="-1"></a>    <span class="at">.cols =</span> <span class="fu">ends_with</span>(<span class="st">&quot;_flow&quot;</span>),</span>
<span id="cb26-6"><a href="api-flow-percentage.html#cb26-6" tabindex="-1"></a>    <span class="at">.fns =</span> <span class="sc">~</span>. <span class="sc">/</span> <span class="fu">get</span>(<span class="fu">sub</span>(<span class="st">&quot;_flow$&quot;</span>, <span class="st">&quot;_NAS&quot;</span>, <span class="fu">cur_column</span>())) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb26-7"><a href="api-flow-percentage.html#cb26-7" tabindex="-1"></a>    <span class="at">.names =</span> <span class="st">&quot;{sub(&#39;_flow$&#39;, &#39;&#39;, .col)}_flowpct&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb26-8"><a href="api-flow-percentage.html#cb26-8" tabindex="-1"></a>  <span class="fu">select</span>(Date, <span class="fu">ends_with</span>(<span class="st">&quot;_flowpct&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb26-9"><a href="api-flow-percentage.html#cb26-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Date =</span> <span class="fu">chrdate_to_flowdate_vec</span>(Date)) <span class="sc">%&gt;%</span></span>
<span id="cb26-10"><a href="api-flow-percentage.html#cb26-10" tabindex="-1"></a>  <span class="fu">arrange</span>(Date) <span class="sc">%&gt;%</span></span>
<span id="cb26-11"><a href="api-flow-percentage.html#cb26-11" tabindex="-1"></a>  tibble<span class="sc">::</span><span class="fu">column_to_rownames</span>(<span class="at">var =</span> <span class="st">&quot;Date&quot;</span>)</span>
<span id="cb26-12"><a href="api-flow-percentage.html#cb26-12" tabindex="-1"></a></span>
<span id="cb26-13"><a href="api-flow-percentage.html#cb26-13" tabindex="-1"></a><span class="fu">names</span>(flowpct) <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">&quot;_flowpct$&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="fu">names</span>(flowpct))</span>
<span id="cb26-14"><a href="api-flow-percentage.html#cb26-14" tabindex="-1"></a></span>
<span id="cb26-15"><a href="api-flow-percentage.html#cb26-15" tabindex="-1"></a><span class="fu">print</span>(flowpct <span class="sc">%&gt;%</span> <span class="fu">select</span>(Australia, Brazil, China, USA) <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="dv">10</span>))</span></code></pre></div>
<table class=" lightable-paper lightable-hover table" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Flow Date
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Australia
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Brazil
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
China
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
USA
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
20250624
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0281460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0106213
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0154277
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0301169
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
20250627
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0707934
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0562816
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0651659
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0248924
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
20250701
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0489678
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0847893
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0717443
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0721819
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
20250703
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0388208
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.1395051
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.1612564
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.1207161
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
20250709
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0745372
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0352085
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0383067
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0153098
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
20250711
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0600016
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0091183
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0220054
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.1102320
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
20250714
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0280433
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.0441572
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.0221710
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0231083
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
20250715
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0454806
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0269412
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0539303
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0207744
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
20250718
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0370245
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0363192
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0768154
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0484770
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
20250721
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0336125
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0130824
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0592443
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0280501
</td>
</tr>
</tbody>
</table>
<p>Save result locally.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="api-flow-percentage.html#cb27-1" tabindex="-1"></a>dir <span class="ot">&lt;-</span> <span class="st">&quot;path to your save directory&quot;</span></span>
<span id="cb27-2"><a href="api-flow-percentage.html#cb27-2" tabindex="-1"></a><span class="fu">mat.write</span>(flowpct, <span class="fu">paste0</span>(dir, <span class="st">&quot;FlowCtryPct_&quot;</span>, alloc_month ,<span class="st">&quot;.csv&quot;</span>))</span></code></pre></div>
</div>
</div>
<div id="api-multi-asset-region-strategy" class="section level3 unnumbered hasAnchor">
<h3>API Multi-Asset Region Strategy<a href="api-flow-percentage.html#api-multi-asset-region-strategy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>EPFR’s Multi-Asset Strategy, rotates between asset classes within equity and fixed-income universes. The following code recreates the equity portion of the Multi-Asset strategy using the API. To learn more about this strategy you can read <a href="multi-asset-strategy.html#multi-asset-strategy">Multi-Asset Strategy</a> section of this notebook.</p>
<p><a href="r%20downloads/API-MultiAsset-Rgn.r">Download the R Script source for this strategy</a><br></p>
<p>For this strategy we calculate aggregate flows into 7 different equity regions. Most of these regions are a single asset class where the API would aggregate flow percentage for us, but pacific ex Japan is made up of 5 asset classes meaning flow percentage will be aggregated using the net assets start and flow USD.</p>
<table>
<thead>
<tr class="header">
<th>Category</th>
<th>Asset Class - Equity</th>
<th>API ID</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>AsiaXJP</td>
<td>asia ex japan</td>
<td>FF121000</td>
</tr>
<tr class="even">
<td>EurXGB</td>
<td>europe ex uk</td>
<td>FF114004</td>
</tr>
<tr class="odd">
<td>Japan</td>
<td>japan</td>
<td>FF111003</td>
</tr>
<tr class="even">
<td>LatAm</td>
<td>latain america</td>
<td>FF124000</td>
</tr>
<tr class="odd">
<td>UK</td>
<td>uk</td>
<td>FF114017</td>
</tr>
<tr class="even">
<td>USA</td>
<td>usa</td>
<td>FF113002</td>
</tr>
<tr class="odd">
<td>PacXJP</td>
<td>australia</td>
<td>FF111001</td>
</tr>
<tr class="even">
<td>PacXJP</td>
<td>hong kong</td>
<td>FF111002</td>
</tr>
<tr class="odd">
<td>PacXJP</td>
<td>pacific regional</td>
<td>FF111004</td>
</tr>
<tr class="even">
<td>PacXJP</td>
<td>singapore</td>
<td>FF111005</td>
</tr>
<tr class="odd">
<td>PacXJP</td>
<td>new zeland</td>
<td>FF111006</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="api-flow-percentage.html#cb28-1" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="st">&quot;FF&quot;</span>  </span>
<span id="cb28-2"><a href="api-flow-percentage.html#cb28-2" tabindex="-1"></a>from_date <span class="ot">&lt;-</span> <span class="st">&quot;01-01-2025&quot;</span>  </span>
<span id="cb28-3"><a href="api-flow-percentage.html#cb28-3" tabindex="-1"></a>to_date <span class="ot">&lt;-</span> <span class="st">&quot;07-28-2025&quot;</span> <span class="co"># TODAYS DATE</span></span>
<span id="cb28-4"><a href="api-flow-percentage.html#cb28-4" tabindex="-1"></a></span>
<span id="cb28-5"><a href="api-flow-percentage.html#cb28-5" tabindex="-1"></a>asset_classes <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;FF121000&quot;</span>, <span class="co"># ASIA EX JAPAN</span></span>
<span id="cb28-6"><a href="api-flow-percentage.html#cb28-6" tabindex="-1"></a>                      <span class="st">&quot;FF114004&quot;</span>, <span class="co"># EUROPE EX GB</span></span>
<span id="cb28-7"><a href="api-flow-percentage.html#cb28-7" tabindex="-1"></a>                      <span class="st">&quot;FF111003&quot;</span>, <span class="co"># JAPAN</span></span>
<span id="cb28-8"><a href="api-flow-percentage.html#cb28-8" tabindex="-1"></a>                      <span class="st">&quot;FF124000&quot;</span>, <span class="co"># LATAM</span></span>
<span id="cb28-9"><a href="api-flow-percentage.html#cb28-9" tabindex="-1"></a>                      <span class="st">&quot;FF114017&quot;</span>, <span class="co"># UK</span></span>
<span id="cb28-10"><a href="api-flow-percentage.html#cb28-10" tabindex="-1"></a>                      <span class="st">&quot;FF113002&quot;</span>, <span class="co"># USA</span></span>
<span id="cb28-11"><a href="api-flow-percentage.html#cb28-11" tabindex="-1"></a>                      <span class="st">&quot;FF111001&quot;</span>, <span class="co"># AUSTRALIA</span></span>
<span id="cb28-12"><a href="api-flow-percentage.html#cb28-12" tabindex="-1"></a>                      <span class="st">&quot;FF111002&quot;</span>, <span class="co"># HONG KONG</span></span>
<span id="cb28-13"><a href="api-flow-percentage.html#cb28-13" tabindex="-1"></a>                      <span class="st">&quot;FF111004&quot;</span>, <span class="co"># PACIFIC REGIONAL</span></span>
<span id="cb28-14"><a href="api-flow-percentage.html#cb28-14" tabindex="-1"></a>                      <span class="st">&quot;FF111005&quot;</span>, <span class="co"># SINGAPORE</span></span>
<span id="cb28-15"><a href="api-flow-percentage.html#cb28-15" tabindex="-1"></a>                      <span class="st">&quot;FF111006&quot;</span>  <span class="co"># NEW ZELAND</span></span>
<span id="cb28-16"><a href="api-flow-percentage.html#cb28-16" tabindex="-1"></a></span>
<span id="cb28-17"><a href="api-flow-percentage.html#cb28-17" tabindex="-1"></a>)</span>
<span id="cb28-18"><a href="api-flow-percentage.html#cb28-18" tabindex="-1"></a></span>
<span id="cb28-19"><a href="api-flow-percentage.html#cb28-19" tabindex="-1"></a>frequency <span class="ot">&lt;-</span> <span class="st">&quot;Daily&quot;</span>  </span>
<span id="cb28-20"><a href="api-flow-percentage.html#cb28-20" tabindex="-1"></a>level  <span class="ot">&lt;-</span> <span class="dv">0</span>  <span class="co"># AGGREGATE</span></span>
<span id="cb28-21"><a href="api-flow-percentage.html#cb28-21" tabindex="-1"></a>categories <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">13</span>, <span class="dv">3</span>) <span class="co"># ASSETS START, FLOW USD</span></span>
<span id="cb28-22"><a href="api-flow-percentage.html#cb28-22" tabindex="-1"></a>assets <span class="ot">&lt;-</span> <span class="st">&quot;true&quot;</span>  </span>
<span id="cb28-23"><a href="api-flow-percentage.html#cb28-23" tabindex="-1"></a>universal_filters <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;U100005&quot;</span>) <span class="co"># ACTIVE FUNDS</span></span>
<span id="cb28-24"><a href="api-flow-percentage.html#cb28-24" tabindex="-1"></a>equity_filters <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code></pre></div>
<p>The next steps for calling data from the API are to create the report, wait for completion, and then return the data.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="api-flow-percentage.html#cb29-1" tabindex="-1"></a>report <span class="ot">&lt;-</span> <span class="fu">epfr.get.reportid</span>(dataset, from_date, to_date, asset_classes, frequency, level,</span>
<span id="cb29-2"><a href="api-flow-percentage.html#cb29-2" tabindex="-1"></a>                            categories, <span class="cn">NULL</span>, <span class="cn">NULL</span>, assets, universal_filters, equity_filters, <span class="cn">NULL</span>, <span class="cn">NULL</span>)</span>
<span id="cb29-3"><a href="api-flow-percentage.html#cb29-3" tabindex="-1"></a></span>
<span id="cb29-4"><a href="api-flow-percentage.html#cb29-4" tabindex="-1"></a>report_id <span class="ot">&lt;-</span> report<span class="sc">$</span>data<span class="sc">$</span>reportId</span>
<span id="cb29-5"><a href="api-flow-percentage.html#cb29-5" tabindex="-1"></a><span class="fu">wait_for_completion</span>(report_id, <span class="st">&quot;FF&quot;</span>, <span class="dv">30</span>, <span class="dv">30</span>)</span>
<span id="cb29-6"><a href="api-flow-percentage.html#cb29-6" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">epfr.get.reportoutput</span>(dataset, report_id)</span>
<span id="cb29-7"><a href="api-flow-percentage.html#cb29-7" tabindex="-1"></a></span>
<span id="cb29-8"><a href="api-flow-percentage.html#cb29-8" tabindex="-1"></a><span class="fu">print</span>(result <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="dv">10</span>))</span></code></pre></div>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 30&quot;</code></pre>
<pre><code>## [1] &quot;Report Incomplete time taken: 60&quot;</code></pre>
<pre><code>## [1] &quot;Report Incomplete time taken: 90&quot;</code></pre>
<pre><code>## [1] &quot;Report Incomplete time taken: 120&quot;</code></pre>
<pre><code>## [1] &quot;Report Incomplete time taken: 150&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 150 seconds taken&quot;</code></pre>
<pre><code>## Selecting by Total Net Assets Start</code></pre>
<table class=" lightable-paper lightable-hover table" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Date
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Asset Class
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Filters
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Flow US$ mill
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Total Net Assets Start
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/28/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
USA-North America-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Active
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-33.4447
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
4548326
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/25/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
USA-North America-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Active
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-2316.4397
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
4534417
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/24/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
USA-North America-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Active
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-63.6056
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
4529274
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/23/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
USA-North America-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Active
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-522.0354
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
4502067
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/22/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
USA-North America-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Active
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
1142.6047
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
4492392
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/21/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
USA-North America-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Active
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-1197.8905
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
4496470
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/18/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
USA-North America-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Active
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
520.7728
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
4495671
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/11/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
USA-North America-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Active
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-1033.4003
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
4500242
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/10/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
USA-North America-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Active
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-1202.9866
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
4492208
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/7/2025
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
USA-North America-FF-Equity
</td>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
Active
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
109.0544
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
4487428
</td>
</tr>
</tbody>
</table>
<p>After getting the report output calculate the percent flow to each of the 7 equity regions, as <span class="math inline">\(\frac{100 \times \sum{Flow}}{\sum{AssetsStart}}\)</span>. Complete methodology is outlined in the <a href="multi-asset-strategy.html#multi-asset-strategy">Multi-Asset Strategy</a> section of this notebook.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="api-flow-percentage.html#cb37-1" tabindex="-1"></a>result_multiAsset_Rgn_daily <span class="ot">&lt;-</span> result <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="api-flow-percentage.html#cb37-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Ctry =</span> <span class="fu">recode</span>(<span class="st">`</span><span class="at">Asset Class</span><span class="st">`</span>,</span>
<span id="cb37-3"><a href="api-flow-percentage.html#cb37-3" tabindex="-1"></a>                  <span class="st">&quot;Asia Ex-Japan-FF-Equity&quot;</span> <span class="ot">=</span> <span class="st">&quot;AsiaXJP&quot;</span>,</span>
<span id="cb37-4"><a href="api-flow-percentage.html#cb37-4" tabindex="-1"></a>                  <span class="st">&quot;Europe ex-UK Regional-Western Europe-FF-Equity&quot;</span> <span class="ot">=</span> <span class="st">&quot;EurXGB&quot;</span>,</span>
<span id="cb37-5"><a href="api-flow-percentage.html#cb37-5" tabindex="-1"></a>                  <span class="st">&quot;Japan-Asia Pacific-FF-Equity&quot;</span> <span class="ot">=</span> <span class="st">&quot;Japan&quot;</span>,</span>
<span id="cb37-6"><a href="api-flow-percentage.html#cb37-6" tabindex="-1"></a>                  <span class="st">&quot;LatAm-FF-Equity&quot;</span> <span class="ot">=</span> <span class="st">&quot;LatAm&quot;</span>,</span>
<span id="cb37-7"><a href="api-flow-percentage.html#cb37-7" tabindex="-1"></a>                  <span class="st">&quot;United Kingdom-Western Europe-FF-Equity&quot;</span> <span class="ot">=</span> <span class="st">&quot;UK&quot;</span>,</span>
<span id="cb37-8"><a href="api-flow-percentage.html#cb37-8" tabindex="-1"></a>                  <span class="st">&quot;USA-North America-FF-Equity&quot;</span> <span class="ot">=</span> <span class="st">&quot;USA&quot;</span>,</span>
<span id="cb37-9"><a href="api-flow-percentage.html#cb37-9" tabindex="-1"></a>                  <span class="st">&quot;Australia-Asia Pacific-FF-Equity&quot;</span> <span class="ot">=</span> <span class="st">&quot;PacXJP&quot;</span>,</span>
<span id="cb37-10"><a href="api-flow-percentage.html#cb37-10" tabindex="-1"></a>                  <span class="st">&quot;Hong Kong Special Administrative Region of China-Asia Pacific-FF-Equity&quot;</span> <span class="ot">=</span> <span class="st">&quot;PacXJP&quot;</span>,</span>
<span id="cb37-11"><a href="api-flow-percentage.html#cb37-11" tabindex="-1"></a>                  <span class="st">&quot;Singapore-Asia Pacific-FF-Equity&quot;</span> <span class="ot">=</span> <span class="st">&quot;PacXJP&quot;</span>,</span>
<span id="cb37-12"><a href="api-flow-percentage.html#cb37-12" tabindex="-1"></a>                  <span class="st">&quot;Pacific Regional-Asia Pacific-FF-Equity&quot;</span> <span class="ot">=</span> <span class="st">&quot;PacXJP&quot;</span>,</span>
<span id="cb37-13"><a href="api-flow-percentage.html#cb37-13" tabindex="-1"></a>                  <span class="st">&quot;New Zealand-Asia Pacific-FF-Equity&quot;</span> <span class="ot">=</span> <span class="st">&quot;PacXJP&quot;</span>,</span>
<span id="cb37-14"><a href="api-flow-percentage.html#cb37-14" tabindex="-1"></a>                  <span class="at">.default =</span> <span class="st">`</span><span class="at">Asset Class</span><span class="st">`</span>) </span>
<span id="cb37-15"><a href="api-flow-percentage.html#cb37-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb37-16"><a href="api-flow-percentage.html#cb37-16" tabindex="-1"></a>  <span class="fu">group_by</span>(Date, Ctry) <span class="sc">%&gt;%</span> </span>
<span id="cb37-17"><a href="api-flow-percentage.html#cb37-17" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="st">`</span><span class="at">Flow US$ mill</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">sum</span>(<span class="st">`</span><span class="at">Flow US$ mill</span><span class="st">`</span>), </span>
<span id="cb37-18"><a href="api-flow-percentage.html#cb37-18" tabindex="-1"></a>            <span class="st">`</span><span class="at">Total Net Assets Start</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">sum</span>(<span class="st">`</span><span class="at">Total Net Assets Start</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb37-19"><a href="api-flow-percentage.html#cb37-19" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">floPct =</span> <span class="dv">100</span> <span class="sc">*</span><span class="st">`</span><span class="at">Flow US$ mill</span><span class="st">`</span> <span class="sc">/</span> <span class="st">`</span><span class="at">Total Net Assets Start</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-20"><a href="api-flow-percentage.html#cb37-20" tabindex="-1"></a>  <span class="fu">select</span>(Date, Ctry, floPct) <span class="sc">%&gt;%</span> </span>
<span id="cb37-21"><a href="api-flow-percentage.html#cb37-21" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Ctry, <span class="at">values_from =</span> floPct) <span class="sc">%&gt;%</span> </span>
<span id="cb37-22"><a href="api-flow-percentage.html#cb37-22" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Date =</span> <span class="fu">as.Date</span>(Date, <span class="at">format =</span> <span class="st">&quot;%m/%d/%Y&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb37-23"><a href="api-flow-percentage.html#cb37-23" tabindex="-1"></a>  <span class="fu">arrange</span>(Date)</span></code></pre></div>
<p>Examine the top rows of the output.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="api-flow-percentage.html#cb38-1" tabindex="-1"></a><span class="fu">print</span>(result_multiAsset_Rgn_daily <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(Date)) <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="dv">10</span>))</span></code></pre></div>
<table class=" lightable-paper lightable-hover table" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Date
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
FundID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Flow US$ mill
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Total Net Assets Start
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/7/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
84.7347
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
164311.4
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/4/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0000
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
164311.4
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/3/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
1.1156
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
164137.9
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/22/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.5472
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
164576.2
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/18/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.7913
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
163995.9
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/15/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
1.1877
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
164019.1
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/14/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.3411
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
163990.0
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/11/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.6604
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
165373.9
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/10/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.5022
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
165113.8
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
7/1/2025
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
14460
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
1.2995
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
163790.9
</td>
</tr>
</tbody>
</table>
<p>Save result locally.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="api-flow-percentage.html#cb39-1" tabindex="-1"></a>dir <span class="ot">&lt;-</span> <span class="st">&quot;path to your save directory&quot;</span></span>
<span id="cb39-2"><a href="api-flow-percentage.html#cb39-2" tabindex="-1"></a><span class="fu">write.csv</span>(result_multiAsset_Rgn_daily, <span class="fu">paste0</span>(dir, <span class="st">&quot;MultiAsset-Rgn-daily-API.csv&quot;</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="api-multi-asset-fi-strategy" class="section level3 unnumbered hasAnchor">
<h3>API Multi-Asset FI Strategy<a href="api-flow-percentage.html#api-multi-asset-fi-strategy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>EPFR’s Multi-Asset Strategy, rotates between asset classes within equity and fixed-income universes. The following code recreates the fixed-income portion of the Multi-Asset strategy using the API. To learn more about this strategy you can read <a href="multi-asset-strategy.html#multi-asset-strategy">Multi-Asset Strategy</a> section of this notebook. <br></p>
<p><a href="r%20downloads/API-MultiAsset-FI.r">Download the R Script source for this strategy</a><br></p>
<p>For this strategy we calculate aggregate flows into 9 fixed-income asset classes, which are listed below. We will need to use multiple filters to achieve these desired asset classes using the API. (Note that when a filter is applied to an asset class it will be applied over all data in the API call, so for this reason there are multiple API reports created.) <br></p>
<p>Each category is defined in a list with 3 elements: category name, asset class, and bond filter.</p>
<table>
<colgroup>
<col width="13%" />
<col width="24%" />
<col width="13%" />
<col width="26%" />
<col width="21%" />
</colgroup>
<thead>
<tr class="header">
<th>Category</th>
<th>Asset Class</th>
<th>API ID1</th>
<th>Bond Filter</th>
<th>API ID2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GLOBEM</td>
<td>global EMs bond</td>
<td>FF223002</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>HYIELD</td>
<td>all bonds</td>
<td>FF200000</td>
<td>high yield</td>
<td>B100013</td>
</tr>
<tr class="odd">
<td>FLOATS</td>
<td>all bonds</td>
<td>FF200000</td>
<td>bank loan</td>
<td>B100016</td>
</tr>
<tr class="even">
<td>USTRIN</td>
<td>usa bonds</td>
<td>FF213002</td>
<td>intermediate term</td>
<td>B100009</td>
</tr>
<tr class="odd">
<td>USTRLT</td>
<td>usa bonds</td>
<td>FF213002</td>
<td>long term</td>
<td>B100008</td>
</tr>
<tr class="even">
<td>USTRST</td>
<td>usa bonds</td>
<td>FF213002</td>
<td>short term</td>
<td>B100010</td>
</tr>
<tr class="odd">
<td>CASH</td>
<td>all money market</td>
<td>FF400000</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>USMUNI</td>
<td>usa bonds</td>
<td>FF213002</td>
<td>municipal</td>
<td>B100019</td>
</tr>
<tr class="odd">
<td>GLOFIX</td>
<td>global bond</td>
<td>FF212000</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="api-flow-percentage.html#cb40-1" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="st">&quot;FF&quot;</span></span>
<span id="cb40-2"><a href="api-flow-percentage.html#cb40-2" tabindex="-1"></a>from_date <span class="ot">&lt;-</span> <span class="st">&quot;01-01-2025&quot;</span></span>
<span id="cb40-3"><a href="api-flow-percentage.html#cb40-3" tabindex="-1"></a>to_date <span class="ot">&lt;-</span> <span class="st">&quot;07-28-2025&quot;</span>  <span class="co"># TODAY&#39;S DATE</span></span>
<span id="cb40-4"><a href="api-flow-percentage.html#cb40-4" tabindex="-1"></a>frequency <span class="ot">&lt;-</span> <span class="st">&quot;Daily&quot;</span></span>
<span id="cb40-5"><a href="api-flow-percentage.html#cb40-5" tabindex="-1"></a>level  <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb40-6"><a href="api-flow-percentage.html#cb40-6" tabindex="-1"></a>categories <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">13</span>, <span class="dv">3</span>) <span class="co"># ASSETS START, FLOW USD</span></span>
<span id="cb40-7"><a href="api-flow-percentage.html#cb40-7" tabindex="-1"></a>assets <span class="ot">&lt;-</span> <span class="st">&quot;true&quot;</span></span>
<span id="cb40-8"><a href="api-flow-percentage.html#cb40-8" tabindex="-1"></a></span>
<span id="cb40-9"><a href="api-flow-percentage.html#cb40-9" tabindex="-1"></a>filters <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="st">&quot;GLOBEM&quot;</span>, <span class="st">&quot;FF223002&quot;</span>, <span class="cn">NULL</span>), </span>
<span id="cb40-10"><a href="api-flow-percentage.html#cb40-10" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;HYIELD&quot;</span>, <span class="st">&quot;FF200000&quot;</span>, <span class="st">&quot;B100013&quot;</span>), </span>
<span id="cb40-11"><a href="api-flow-percentage.html#cb40-11" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;FLOATS&quot;</span>, <span class="st">&quot;FF200000&quot;</span>, <span class="st">&quot;B100016&quot;</span>), </span>
<span id="cb40-12"><a href="api-flow-percentage.html#cb40-12" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;USTRIN&quot;</span>, <span class="st">&quot;FF213002&quot;</span>, <span class="st">&quot;B100009&quot;</span>), </span>
<span id="cb40-13"><a href="api-flow-percentage.html#cb40-13" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;USTRLT&quot;</span>, <span class="st">&quot;FF213002&quot;</span>, <span class="st">&quot;B100008&quot;</span>), </span>
<span id="cb40-14"><a href="api-flow-percentage.html#cb40-14" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;USTRST&quot;</span>, <span class="st">&quot;FF213002&quot;</span>, <span class="st">&quot;B100010&quot;</span>), </span>
<span id="cb40-15"><a href="api-flow-percentage.html#cb40-15" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;CASH&quot;</span>, <span class="st">&quot;FF400000&quot;</span>, <span class="cn">NULL</span>), </span>
<span id="cb40-16"><a href="api-flow-percentage.html#cb40-16" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;USMUNI&quot;</span>, <span class="st">&quot;FF213002&quot;</span>, <span class="st">&quot;B100019&quot;</span>), </span>
<span id="cb40-17"><a href="api-flow-percentage.html#cb40-17" tabindex="-1"></a>                <span class="fu">list</span>(<span class="st">&quot;GLOFIX&quot;</span>, <span class="st">&quot;FF212000&quot;</span>, <span class="cn">NULL</span>))</span></code></pre></div>
<p>The next steps for calling data from the API are to create the report, wait for completion, and then return the data. We will do this for all 9 fixed-income asset classes.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="api-flow-percentage.html#cb41-1" tabindex="-1"></a>result_multiAsset_FI_daily <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb41-2"><a href="api-flow-percentage.html#cb41-2" tabindex="-1"></a></span>
<span id="cb41-3"><a href="api-flow-percentage.html#cb41-3" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(filters)) {</span>
<span id="cb41-4"><a href="api-flow-percentage.html#cb41-4" tabindex="-1"></a></span>
<span id="cb41-5"><a href="api-flow-percentage.html#cb41-5" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;Calling data for: &quot;</span>, filters[[i]][[<span class="dv">1</span>]]))</span>
<span id="cb41-6"><a href="api-flow-percentage.html#cb41-6" tabindex="-1"></a></span>
<span id="cb41-7"><a href="api-flow-percentage.html#cb41-7" tabindex="-1"></a>  report <span class="ot">&lt;-</span> <span class="fu">epfr.get.reportid</span>(dataset,</span>
<span id="cb41-8"><a href="api-flow-percentage.html#cb41-8" tabindex="-1"></a>                              from_date,</span>
<span id="cb41-9"><a href="api-flow-percentage.html#cb41-9" tabindex="-1"></a>                              to_date,</span>
<span id="cb41-10"><a href="api-flow-percentage.html#cb41-10" tabindex="-1"></a>                              <span class="fu">list</span>(filters[[i]][[<span class="dv">2</span>]]), <span class="co"># ASSET CLASS</span></span>
<span id="cb41-11"><a href="api-flow-percentage.html#cb41-11" tabindex="-1"></a>                              frequency,</span>
<span id="cb41-12"><a href="api-flow-percentage.html#cb41-12" tabindex="-1"></a>                              level,</span>
<span id="cb41-13"><a href="api-flow-percentage.html#cb41-13" tabindex="-1"></a>                              categories,</span>
<span id="cb41-14"><a href="api-flow-percentage.html#cb41-14" tabindex="-1"></a>                              <span class="cn">NULL</span>,</span>
<span id="cb41-15"><a href="api-flow-percentage.html#cb41-15" tabindex="-1"></a>                              <span class="cn">NULL</span>,</span>
<span id="cb41-16"><a href="api-flow-percentage.html#cb41-16" tabindex="-1"></a>                              assets,</span>
<span id="cb41-17"><a href="api-flow-percentage.html#cb41-17" tabindex="-1"></a>                              <span class="cn">NULL</span>,</span>
<span id="cb41-18"><a href="api-flow-percentage.html#cb41-18" tabindex="-1"></a>                              <span class="cn">NULL</span>,</span>
<span id="cb41-19"><a href="api-flow-percentage.html#cb41-19" tabindex="-1"></a>                              <span class="cf">if</span> (<span class="fu">is.null</span>(filters[[i]][[<span class="dv">3</span>]])) <span class="cn">NULL</span> <span class="cf">else</span> <span class="fu">list</span>(filters[[i]][[<span class="dv">3</span>]]),</span>
<span id="cb41-20"><a href="api-flow-percentage.html#cb41-20" tabindex="-1"></a>                              <span class="cn">NULL</span>) <span class="co"># BOND FILTER</span></span>
<span id="cb41-21"><a href="api-flow-percentage.html#cb41-21" tabindex="-1"></a></span>
<span id="cb41-22"><a href="api-flow-percentage.html#cb41-22" tabindex="-1"></a>  report_id <span class="ot">&lt;-</span> report<span class="sc">$</span>data<span class="sc">$</span>reportId</span>
<span id="cb41-23"><a href="api-flow-percentage.html#cb41-23" tabindex="-1"></a>  <span class="fu">wait_for_completion</span>(report_id, dataset, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb41-24"><a href="api-flow-percentage.html#cb41-24" tabindex="-1"></a>  result_catagory <span class="ot">&lt;-</span> <span class="fu">epfr.get.reportoutput</span>(<span class="at">dataset =</span> <span class="st">&quot;FF&quot;</span>,  <span class="at">report_id =</span> <span class="fu">toString</span>(report_id))</span>
<span id="cb41-25"><a href="api-flow-percentage.html#cb41-25" tabindex="-1"></a></span>
<span id="cb41-26"><a href="api-flow-percentage.html#cb41-26" tabindex="-1"></a>  restult_catagory_clean <span class="ot">&lt;-</span>  result_catagory <span class="sc">%&gt;%</span></span>
<span id="cb41-27"><a href="api-flow-percentage.html#cb41-27" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">FloPct =</span> <span class="dv">100</span> <span class="sc">*</span><span class="st">`</span><span class="at">Flow US$ mill</span><span class="st">`</span> <span class="sc">/</span> <span class="st">`</span><span class="at">Total Net Assets Start</span><span class="st">`</span>,</span>
<span id="cb41-28"><a href="api-flow-percentage.html#cb41-28" tabindex="-1"></a>           <span class="at">Date =</span> <span class="fu">as.Date</span>(Date, <span class="at">format =</span> <span class="st">&quot;%m/%d/%Y&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb41-29"><a href="api-flow-percentage.html#cb41-29" tabindex="-1"></a>    <span class="fu">select</span>(Date, FloPct) <span class="sc">%&gt;%</span></span>
<span id="cb41-30"><a href="api-flow-percentage.html#cb41-30" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="sc">!!</span>filters[[i]][[<span class="dv">1</span>]] <span class="sc">:=</span> FloPct)</span>
<span id="cb41-31"><a href="api-flow-percentage.html#cb41-31" tabindex="-1"></a></span>
<span id="cb41-32"><a href="api-flow-percentage.html#cb41-32" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(result_multiAsset_FI_daily)) {</span>
<span id="cb41-33"><a href="api-flow-percentage.html#cb41-33" tabindex="-1"></a>    result_multiAsset_FI_daily <span class="ot">&lt;-</span> restult_catagory_clean</span>
<span id="cb41-34"><a href="api-flow-percentage.html#cb41-34" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb41-35"><a href="api-flow-percentage.html#cb41-35" tabindex="-1"></a>    result_multiAsset_FI_daily <span class="ot">&lt;-</span> result_multiAsset_FI_daily <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(restult_catagory_clean, <span class="at">by =</span> <span class="st">&quot;Date&quot;</span>)</span>
<span id="cb41-36"><a href="api-flow-percentage.html#cb41-36" tabindex="-1"></a>  }</span>
<span id="cb41-37"><a href="api-flow-percentage.html#cb41-37" tabindex="-1"></a></span>
<span id="cb41-38"><a href="api-flow-percentage.html#cb41-38" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Calling data for: GLOBEM&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: HYIELD&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: FLOATS&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: USTRIN&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: USTRLT&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: USTRST&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: CASH&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: USMUNI&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<pre><code>## [1] &quot;Calling data for: GLOFIX&quot;</code></pre>
<pre><code>## [1] &quot;Inital wait for report to complete, delay 20&quot;</code></pre>
<pre><code>## [1] &quot;Report complete: 20 seconds taken&quot;</code></pre>
<p>Check top rows of output.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="api-flow-percentage.html#cb69-1" tabindex="-1"></a><span class="fu">print</span>(result_multiAsset_FI_daily <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(Date)) <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="dv">10</span>))</span></code></pre></div>
<table class=" lightable-paper lightable-hover table" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
Date
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
GLOBEM
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
HYIELD
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
FLOATS
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
USTRIN
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
USTRLT
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
USTRST
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
CASH
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
USMUNI
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;font-weight: bold;color: white !important;background-color: rgba(181, 78, 214, 255) !important;">
GLOFIX
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
2019-06-05
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.0279737
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0953499
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.1986875
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0177541
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0094597
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.1615458
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0729610
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0417629
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.4192535
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
2014-05-26
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0521502
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.0093754
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.0000483
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0024525
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.0004529
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.0018943
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.1878645
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.0011076
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.3851974
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
2010-04-27
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.3376269
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.1029392
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.2648442
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0030902
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.1746803
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0602334
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0982793
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0080934
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.3946408
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
2010-04-16
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.4127297
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0711022
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.4498816
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.0104679
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0531455
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0845487
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.1359191
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0055590
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.3806760
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
2010-03-03
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.2413263
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0803211
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.2213384
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0867212
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0254124
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.2971411
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0944945
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0471712
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.4351618
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
2010-01-20
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.3366571
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0616013
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.2117595
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0333624
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0255387
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.2164246
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.0404757
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0590163
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.3594302
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
2009-10-27
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.3782404
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0570280
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0604020
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0131985
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.0056886
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.2609019
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.1491588
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0774289
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.3631106
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
2009-10-19
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0045374
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0594008
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.1519629
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.1209147
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0139186
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.3042336
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0739953
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0844787
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.4147324
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
2009-07-16
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.2589983
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0386666
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.1033427
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.1252718
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.0324792
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.2348748
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.2249244
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0721367
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.3610647
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
2009-07-06
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0130407
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0321640
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.3548821
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
-0.2521641
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0004447
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.3632362
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.2354842
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.0784644
</td>
<td style="text-align:right;font-weight: bold;color: rgba(44, 31, 110, 255) !important;">
0.5482938
</td>
</tr>
</tbody>
</table>
<p>Save result locally.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="api-flow-percentage.html#cb70-1" tabindex="-1"></a>dir <span class="ot">&lt;-</span> <span class="st">&quot;path to your save directory&quot;</span></span>
<span id="cb70-2"><a href="api-flow-percentage.html#cb70-2" tabindex="-1"></a><span class="fu">write.csv</span>(result_multiAsset_FI_daily, <span class="fu">paste0</span>(dir, <span class="st">&quot;result_multiAsset_FI_daily.csv&quot;</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="quick-start.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="api-dictionaries.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": true,
    "facebook": false,
    "twitter": false,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": false
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/EPFR/EPFR-QuantNotebooks/docs/00-EPFRAPI.Rmd",
    "text": "Suggest an edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
